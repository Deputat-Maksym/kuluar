!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Glide=e()}(this,function(){"use strict";var n={type:"slider",startAt:0,perView:1,focusAt:0,gap:10,autoplay:!1,hoverpause:!0,keyboard:!0,bound:!1,swipeThreshold:80,dragThreshold:120,perTouch:!1,touchRatio:.5,touchAngle:45,animationDuration:400,rewind:!0,rewindDuration:800,animationTimingFunc:"cubic-bezier(.165, .840, .440, 1)",throttle:10,direction:"ltr",peek:0,breakpoints:{},classes:{direction:{ltr:"glide--ltr",rtl:"glide--rtl"},slider:"glide--slider",carousel:"glide--carousel",swipeable:"glide--swipeable",dragging:"glide--dragging",cloneSlide:"glide__slide--clone",activeNav:"glide__bullet--active",activeSlide:"glide__slide--active",disabledArrow:"glide__arrow--disabled"}};function u(t){console.error("[Glide warn]: "+t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};function y(t){return parseInt(t)}function s(t){return"string"==typeof t}function c(t){var e=void 0===t?"undefined":r(t);return"function"===e||"object"===e&&t}function l(t){return"function"==typeof t}function f(t){return void 0===t}function d(t){return t.constructor===Array}function h(t,e,n){Object.defineProperty(t,e,n)}function v(t,e){var n=a({},t,e);return e.hasOwnProperty("classes")&&(n.classes=a({},t.classes,e.classes),e.classes.hasOwnProperty("direction")&&(n.classes.direction=a({},t.classes.direction,e.classes.direction))),e.hasOwnProperty("breakpoints")&&(n.breakpoints=a({},t.breakpoints,e.breakpoints)),n}var p=(t(e,[{key:"on",value:function(t,e){if(d(t))for(var n=0;n<t.length;n++)this.on(t[n],e);this.hop.call(this.events,t)||(this.events[t]=[]);var i=this.events[t].push(e)-1;return{remove:function(){delete this.events[t][i]}}}},{key:"emit",value:function(t,e){if(d(t))for(var n=0;n<t.length;n++)this.emit(t[n],e);this.hop.call(this.events,t)&&this.events[t].forEach(function(t){t(e||{})})}}]),e);function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,e),this.events=t,this.hop=t.hasOwnProperty}var m=(t(g,[{key:"mount",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return this._e.emit("mount.before"),c(e)?this._c=function(t,e,n){var i={};for(var r in e)l(e[r])?i[r]=e[r](t,i,n):u("Extension must be a function");for(var o in i)l(i[o].mount)&&i[o].mount();return i}(this,e,this._e):u("You need to provide a object on `mount()`"),this._e.emit("mount.after"),this}},{key:"mutate",value:function(t){var e=0<arguments.length&&void 0!==t?t:[];return d(e)?this._t=e:u("You need to provide a array on `mutate()`"),this}},{key:"update",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return this.settings=v(this.settings,e),e.hasOwnProperty("startAt")&&(this.index=e.startAt),this._e.emit("update"),this}},{key:"go",value:function(t){return this._c.Run.make(t),this}},{key:"move",value:function(t){return this._c.Transition.disable(),this._c.Move.make(t),this}},{key:"destroy",value:function(){return this._e.emit("destroy"),this}},{key:"play",value:function(t){var e=0<arguments.length&&void 0!==t&&t;return e&&(this.settings.autoplay=e),this._e.emit("play"),this}},{key:"pause",value:function(){return this._e.emit("pause"),this}},{key:"disable",value:function(){return this.disabled=!0,this}},{key:"enable",value:function(){return this.disabled=!1,this}},{key:"on",value:function(t,e){return this._e.on(t,e),this}},{key:"isType",value:function(t){return this.settings.type===t}},{key:"settings",get:function(){return this._o},set:function(t){c(t)?this._o=t:u("Options must be an `object` instance.")}},{key:"index",get:function(){return this._i},set:function(t){this._i=y(t)}},{key:"type",get:function(){return this.settings.type}},{key:"disabled",get:function(){return this._d},set:function(t){this._d=!!t}}]),g);function g(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i(this,g),this._c={},this._t=[],this._e=new p,this.disabled=!1,this.selector=t,this.settings=v(n,e),this.index=this.settings.startAt}function b(){return(new Date).getTime()}function w(n,i,r){var o=void 0,s=void 0,u=void 0,a=void 0,c=0;r=r||{};function l(){c=!1===r.leading?0:b(),o=null,a=n.apply(s,u),o||(s=u=null)}function t(){var t=b();c||!1!==r.leading||(c=t);var e=i-(t-c);return s=this,u=arguments,e<=0||i<e?(o&&(clearTimeout(o),o=null),c=t,a=n.apply(s,u),o||(s=u=null)):o||!1===r.trailing||(o=setTimeout(l,e)),a}return t.cancel=function(){clearTimeout(o),c=0,o=s=u=null},t}var _={ltr:["marginLeft","marginRight"],rtl:["marginRight","marginLeft"]};function k(t){if(t&&t.parentNode){for(var e=t.parentNode.firstChild,n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}return[]}function S(t){return!!(t&&t instanceof window.HTMLElement)}var H='[data-glide-el="track"]';var x=(t(T,[{key:"on",value:function(t,e,n,i){var r=3<arguments.length&&void 0!==i&&i;s(t)&&(t=[t]);for(var o=0;o<t.length;o++)this.listeners[t[o]]=n,e.addEventListener(t[o],this.listeners[t[o]],r)}},{key:"off",value:function(t,e,n){var i=2<arguments.length&&void 0!==n&&n;s(t)&&(t=[t]);for(var r=0;r<t.length;r++)e.removeEventListener(t[r],this.listeners[t[r]],i)}},{key:"destroy",value:function(){delete this.listeners}}]),T);function T(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};i(this,T),this.listeners=t}var A=["ltr","rtl"],O={">":"<","<":">","=":"="};function L(t,e){return{modify:function(t){return e.Direction.is("rtl")?-t:t}}}function j(i,r,o){var s=[function(e,n){return{modify:function(t){return t+n.Gaps.value*e.index}}},function(t,e){return{modify:function(t){return t+e.Clones.grow/2}}},function(n,i){return{modify:function(t){if(0<=n.settings.focusAt){var e=i.Peek.value;return c(e)?t-e.before:t-e}return t}}},function(o,s){return{modify:function(t){var e=s.Gaps.value,n=s.Sizes.width,i=o.settings.focusAt,r=s.Sizes.slideWidth;return"center"===i?t-(n/2-r/2):t-r*i-e*i}}}].concat(i._t,[L]);return{mutate:function(t){for(var e=0;e<s.length;e++){var n=s[e];l(n)&&l(n().modify)?t=n(i,r,o).modify(t):u("Transformer should be a function that returns an object with `modify()` method")}return t}}}var C=!1;try{var E=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("testPassive",null,E),window.removeEventListener("testPassive",null,E)}catch(t){}var M=C,P=["touchstart","mousedown"],z=["touchmove","mousemove"],D=["touchend","touchcancel","mouseup","mouseleave"],R=["mousedown","mousemove","mouseup","mouseleave"];function q(t){return c(t)?(n=t,Object.keys(n).sort().reduce(function(t,e){return t[e]=n[e],t[e],t},{})):(u("Breakpoints option must be an object"),{});var n}var W={Html:function(e,t){var n={mount:function(){this.root=e.selector,this.track=this.root.querySelector(H),this.slides=Array.prototype.slice.call(this.wrapper.children).filter(function(t){return!t.classList.contains(e.settings.classes.cloneSlide)})}};return h(n,"root",{get:function(){return n._r},set:function(t){s(t)&&(t=document.querySelector(t)),S(t)?n._r=t:u("Root element must be a existing Html node")}}),h(n,"track",{get:function(){return n._t},set:function(t){S(t)?n._t=t:u("Could not find track element. Please use "+H+" attribute.")}}),h(n,"wrapper",{get:function(){return n.track.children[0]}}),n},Translate:function(r,o,s){var u={set:function(t){var e=j(r,o).mutate(t);o.Html.wrapper.style.transform="translate3d("+-1*e+"px, 0px, 0px)"},remove:function(){o.Html.wrapper.style.transform=""}};return s.on("move",function(t){var e=o.Gaps.value,n=o.Sizes.length,i=o.Sizes.slideWidth;return r.isType("carousel")&&o.Run.isOffset("<")?(o.Transition.after(function(){s.emit("translate.jump"),u.set(i*(n-1))}),u.set(-i-e*n)):r.isType("carousel")&&o.Run.isOffset(">")?(o.Transition.after(function(){s.emit("translate.jump"),u.set(0)}),u.set(i*n+e*n)):u.set(t.movement)}),s.on("destroy",function(){u.remove()}),u},Transition:function(n,i,t){var r=!1,e={compose:function(t){var e=n.settings;return r?t+" 0ms "+e.animationTimingFunc:t+" "+this.duration+"ms "+e.animationTimingFunc},set:function(t){var e=0<arguments.length&&void 0!==t?t:"transform";i.Html.wrapper.style.transition=this.compose(e)},remove:function(){i.Html.wrapper.style.transition=""},after:function(t){setTimeout(function(){t()},this.duration)},enable:function(){r=!1,this.set()},disable:function(){r=!0,this.set()}};return h(e,"duration",{get:function(){var t=n.settings;return n.isType("slider")&&i.Run.offset?t.rewindDuration:t.animationDuration}}),t.on("move",function(){e.set()}),t.on(["build.before","resize","translate.jump"],function(){e.disable()}),t.on("run",function(){e.enable()}),t.on("destroy",function(){e.remove()}),e},Direction:function(t,e,n){var i={mount:function(){this.value=t.settings.direction},resolve:function(t){var e=t.slice(0,1);return this.is("rtl")?t.split(e).join(O[e]):t},is:function(t){return this.value===t},addClass:function(){e.Html.root.classList.add(t.settings.classes.direction[this.value])},removeClass:function(){e.Html.root.classList.remove(t.settings.classes.direction[this.value])}};return h(i,"value",{get:function(){return i._v},set:function(t){-1<A.indexOf(t)?i._v=t:u("Direction value must be `ltr` or `rtl`")}}),n.on(["destroy","update"],function(){i.removeClass()}),n.on("update",function(){i.mount()}),n.on(["build.before","update"],function(){i.addClass()}),i},Peek:function(n,t,e){var i={mount:function(){this.value=n.settings.peek}};return h(i,"value",{get:function(){return i._v},set:function(t){c(t)?(t.before=y(t.before),t.after=y(t.after)):t=y(t),i._v=t}}),h(i,"reductor",{get:function(){var t=i.value,e=n.settings.perView;return c(t)?t.before/e+t.after/e:2*t/e}}),e.on(["resize","update"],function(){i.mount()}),i},Sizes:function(t,i,e){var n={setupSlides:function(){for(var t=this.slideWidth+"px",e=i.Html.slides,n=0;n<e.length;n++)e[n].style.width=t},setupWrapper:function(){i.Html.wrapper.style.width=this.wrapperSize+"px"},remove:function(){for(var t=i.Html.slides,e=0;e<t.length;e++)t[e].style.width="";i.Html.wrapper.style.width=""}};return h(n,"length",{get:function(){return i.Html.slides.length}}),h(n,"width",{get:function(){return i.Html.root.offsetWidth}}),h(n,"wrapperSize",{get:function(){return n.slideWidth*n.length+i.Gaps.grow+i.Clones.grow}}),h(n,"slideWidth",{get:function(){return n.width/t.settings.perView-i.Peek.reductor-i.Gaps.reductor}}),e.on(["build.before","resize","update"],function(){n.setupSlides(),n.setupWrapper()}),e.on("destroy",function(){n.remove()}),n},Gaps:function(e,o,t){var n={apply:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e].style,r=o.Direction.value;i[_[r][0]]=0!==e?this.value/2+"px":"",e!==t.length-1?i[_[r][1]]=this.value/2+"px":i[_[r][1]]=""}},remove:function(t){for(var e=0,n=t.length;e<n;e++){var i=t[e].style;i.marginLeft="",i.marginRight=""}}};return h(n,"value",{get:function(){return y(e.settings.gap)}}),h(n,"grow",{get:function(){return n.value*(o.Sizes.length-1)}}),h(n,"reductor",{get:function(){var t=e.settings.perView;return n.value*(t-1)/t}}),t.on(["build.after","update"],w(function(){n.apply(o.Html.wrapper.children)},30)),t.on("destroy",function(){n.remove(o.Html.wrapper.children)}),n},Move:function(t,i,r){var e={mount:function(){this._o=0},make:function(t){var e=this,n=0<arguments.length&&void 0!==t?t:0;this.offset=n,r.emit("move",{movement:this.value}),i.Transition.after(function(){r.emit("move.after",{movement:e.value})})}};return h(e,"offset",{get:function(){return e._o},set:function(t){e._o=f(t)?0:y(t)}}),h(e,"translate",{get:function(){return i.Sizes.slideWidth*t.index}}),h(e,"value",{get:function(){var t=this.offset,e=this.translate;return i.Direction.is("rtl")?e+t:e-t}}),r.on(["build.before","run"],function(){e.make()}),e},Clones:function(v,p,t){var e={mount:function(){this.items=[],v.isType("carousel")&&(this.items=this.collect())},collect:function(t){for(var e=0<arguments.length&&void 0!==t?t:[],n=p.Html.slides,i=v.settings,r=i.perView,o=i.classes,s=r+ +!!v.settings.peek,u=n.slice(0,s),a=n.slice(-s),c=0;c<Math.max(1,Math.floor(r/n.length));c++){for(var l=0;l<u.length;l++){var f=u[l].cloneNode(!0);f.classList.add(o.cloneSlide),e.push(f)}for(var d=0;d<a.length;d++){var h=a[d].cloneNode(!0);h.classList.add(o.cloneSlide),e.unshift(h)}}return e},append:function(){for(var t=this.items,e=p.Html,n=e.wrapper,i=e.slides,r=Math.floor(t.length/2),o=t.slice(0,r).reverse(),s=t.slice(r,t.length),u=p.Sizes.slideWidth+"px",a=0;a<s.length;a++)n.appendChild(s[a]);for(var c=0;c<o.length;c++)n.insertBefore(o[c],i[0]);for(var l=0;l<t.length;l++)t[l].style.width=u},remove:function(){for(var t=this.items,e=0;e<t.length;e++)p.Html.wrapper.removeChild(t[e])}};return h(e,"grow",{get:function(){return(p.Sizes.slideWidth+p.Gaps.value)*e.items.length}}),t.on("update",function(){e.remove(),e.mount(),e.append()}),t.on("build.before",function(){v.isType("carousel")&&e.append()}),t.on("destroy",function(){e.remove()}),e},Resize:function(t,e,n){var i=new x,r={mount:function(){this.bind()},bind:function(){i.on("resize",window,w(function(){n.emit("resize")},t.settings.throttle))},unbind:function(){i.off("resize",window)}};return n.on("destroy",function(){r.unbind(),i.destroy()}),r},Build:function(n,i,t){var e={mount:function(){t.emit("build.before"),this.typeClass(),this.activeClass(),t.emit("build.after")},typeClass:function(){i.Html.root.classList.add(n.settings.classes[n.settings.type])},activeClass:function(){var e=n.settings.classes,t=i.Html.slides[n.index];t&&(t.classList.add(e.activeSlide),k(t).forEach(function(t){t.classList.remove(e.activeSlide)}))},removeClasses:function(){var e=n.settings.classes;i.Html.root.classList.remove(e[n.settings.type]),i.Html.slides.forEach(function(t){t.classList.remove(e.activeSlide)})}};return t.on(["destroy","update"],function(){e.removeClasses()}),t.on(["resize","update"],function(){e.mount()}),t.on("move",function(){e.activeClass()}),e},Run:function(o,n,i){var t={mount:function(){this._o=!1},make:function(t){var e=this;o.disabled||(o.disable(),this.move=t,i.emit("run.before",this.move),this.calculate(),i.emit("run",this.move),n.Transition.after(function(){e.isStart()&&i.emit("run.start",e.move),e.isEnd()&&i.emit("run.end",e.move),(e.isOffset("<")||e.isOffset(">"))&&(e._o=!1,i.emit("run.offset",e.move)),i.emit("run.after",e.move),o.enable()}))},calculate:function(){var t=this.move,e=this.length,n=t.steps,i=t.direction,r="number"==typeof y(n)&&0!==y(n);switch(i){case">":">"===n?o.index=e:this.isEnd()?o.isType("slider")&&!o.settings.rewind||(this._o=!0,o.index=0):r?o.index+=Math.min(e-o.index,-y(n)):o.index++;break;case"<":"<"===n?o.index=0:this.isStart()?o.isType("slider")&&!o.settings.rewind||(this._o=!0,o.index=e):r?o.index-=Math.min(o.index,y(n)):o.index--;break;case"=":o.index=n;break;default:u("Invalid direction pattern ["+i+n+"] has been used")}},isStart:function(){return 0===o.index},isEnd:function(){return o.index===this.length},isOffset:function(t){return this._o&&this.move.direction===t}};return h(t,"move",{get:function(){return this._m},set:function(t){var e=t.substr(1);this._m={direction:t.substr(0,1),steps:e?y(e)?y(e):e:0}}}),h(t,"length",{get:function(){var t=o.settings,e=n.Html.slides.length;return o.isType("slider")&&"center"!==t.focusAt&&t.bound?e-1-(y(t.perView)-1)+y(t.focusAt):e-1}}),h(t,"offset",{get:function(){return this._o}}),t},Swipe:function(d,h,v){var n=new x,p=0,m=0,g=0,i=!1,r=!!M&&{passive:!0},t={mount:function(){this.bindSwipeStart()},start:function(t){if(!i&&!d.disabled){this.disable();var e=this.touches(t);p=null,m=y(e.pageX),g=y(e.pageY),this.bindSwipeMove(),this.bindSwipeEnd(),v.emit("swipe.start")}},move:function(t){if(!d.disabled){var e=d.settings,n=e.touchAngle,i=e.touchRatio,r=e.classes,o=this.touches(t),s=y(o.pageX)-m,u=y(o.pageY)-g,a=Math.abs(s<<2),c=Math.abs(u<<2),l=Math.sqrt(a+c),f=Math.sqrt(c);if(!(180*(p=Math.asin(f/l))/Math.PI<n))return!1;t.stopPropagation(),h.Move.make(s*parseFloat(i)),h.Html.root.classList.add(r.dragging),v.emit("swipe.move")}},end:function(t){if(!d.disabled){var e=d.settings,n=this.touches(t),i=this.threshold(t),r=n.pageX-m,o=180*p/Math.PI,s=Math.round(r/h.Sizes.slideWidth);this.enable(),i<r&&o<e.touchAngle?(e.perTouch&&(s=Math.min(s,y(e.perTouch))),h.Direction.is("rtl")&&(s=-s),h.Run.make(h.Direction.resolve("<"+s))):r<-i&&o<e.touchAngle?(e.perTouch&&(s=Math.max(s,-y(e.perTouch))),h.Direction.is("rtl")&&(s=-s),h.Run.make(h.Direction.resolve(">"+s))):h.Move.make(),h.Html.root.classList.remove(e.classes.dragging),this.unbindSwipeMove(),this.unbindSwipeEnd(),v.emit("swipe.end")}},bindSwipeStart:function(){var e=this,t=d.settings;t.swipeThreshold&&n.on(P[0],h.Html.wrapper,function(t){e.start(t)},r),t.dragThreshold&&n.on(P[1],h.Html.wrapper,function(t){e.start(t)},r)},unbindSwipeStart:function(){n.off(P[0],h.Html.wrapper,r),n.off(P[1],h.Html.wrapper,r)},bindSwipeMove:function(){var e=this;n.on(z,h.Html.wrapper,w(function(t){e.move(t)},d.settings.throttle),r)},unbindSwipeMove:function(){n.off(z,h.Html.wrapper,r)},bindSwipeEnd:function(){var e=this;n.on(D,h.Html.wrapper,function(t){e.end(t)})},unbindSwipeEnd:function(){n.off(D,h.Html.wrapper)},touches:function(t){return-1<R.indexOf(t.type)?t:t.touches[0]||t.changedTouches[0]},threshold:function(t){var e=d.settings;return-1<R.indexOf(t.type)?e.dragThreshold:e.swipeThreshold},enable:function(){return i=!1,h.Transition.enable(),this},disable:function(){return i=!0,h.Transition.disable(),this}};return v.on("build.after",function(){h.Html.root.classList.add(d.settings.classes.swipeable)}),v.on("destroy",function(){t.unbindSwipeStart(),t.unbindSwipeMove(),t.unbindSwipeEnd(),n.destroy()}),t},Images:function(t,e,n){var i=new x,r={mount:function(){this.bind()},bind:function(){i.on("dragstart",e.Html.wrapper,this.dragstart)},unbind:function(){i.off("dragstart",e.Html.wrapper)},dragstart:function(t){t.preventDefault()}};return n.on("destroy",function(){r.unbind(),i.destroy()}),r},Anchors:function(t,e,n){var i=new x,r=!1,o=!1,s={mount:function(){this._a=e.Html.wrapper.querySelectorAll("a"),this.bind()},bind:function(){i.on("click",e.Html.wrapper,this.click)},unbind:function(){i.off("click",e.Html.wrapper)},click:function(t){o&&(t.stopPropagation(),t.preventDefault())},detach:function(){if(o=!0,!r){for(var t=0;t<this.items.length;t++)this.items[t].draggable=!1,this.items[t].setAttribute("data-href",this.items[t].getAttribute("href")),this.items[t].removeAttribute("href");r=!0}return this},attach:function(){if(o=!1,r){for(var t=0;t<this.items.length;t++)this.items[t].draggable=!0,this.items[t].setAttribute("href",this.items[t].getAttribute("data-href"));r=!1}return this}};return h(s,"items",{get:function(){return s._a}}),n.on("swipe.move",function(){s.detach()}),n.on("swipe.end",function(){e.Transition.after(function(){s.attach()})}),n.on("destroy",function(){s.attach(),s.unbind(),i.destroy()}),s},Controls:function(i,e,t){var n=new x,r=!!M&&{passive:!0},o={mount:function(){this._n=e.Html.root.querySelectorAll('[data-glide-el="controls[nav]"]'),this._c=e.Html.root.querySelectorAll('[data-glide-el^="controls"]'),this.addBindings()},setActive:function(){for(var t=0;t<this._n.length;t++)this.addClass(this._n[t].children)},removeActive:function(){for(var t=0;t<this._n.length;t++)this.removeClass(this._n[t].children)},addClass:function(t){var e=i.settings,n=t[i.index];n&&(n.classList.add(e.classes.activeNav),k(n).forEach(function(t){t.classList.remove(e.classes.activeNav)}))},removeClass:function(t){var e=t[i.index];e&&e.classList.remove(i.settings.classes.activeNav)},addBindings:function(){for(var t=0;t<this._c.length;t++)this.bind(this._c[t].children)},removeBindings:function(){for(var t=0;t<this._c.length;t++)this.unbind(this._c[t].children)},bind:function(t){for(var e=0;e<t.length;e++)n.on("click",t[e],this.click),n.on("touchstart",t[e],this.click,r)},unbind:function(t){for(var e=0;e<t.length;e++)n.off(["click","touchstart"],t[e])},click:function(t){t.preventDefault(),e.Run.make(e.Direction.resolve(t.currentTarget.getAttribute("data-glide-dir")))}};return h(o,"items",{get:function(){return o._c}}),t.on(["mount.after","move.after"],function(){o.setActive()}),t.on("destroy",function(){o.removeBindings(),o.removeActive(),n.destroy()}),o},Keyboard:function(t,e,n){var i=new x,r={mount:function(){t.settings.keyboard&&this.bind()},bind:function(){i.on("keyup",document,this.press)},unbind:function(){i.off("keyup",document)},press:function(t){39===t.keyCode&&e.Run.make(e.Direction.resolve(">")),37===t.keyCode&&e.Run.make(e.Direction.resolve("<"))}};return n.on(["destroy","update"],function(){r.unbind()}),n.on("update",function(){r.mount()}),n.on("destroy",function(){i.destroy()}),r},Autoplay:function(e,n,t){var i=new x,r={mount:function(){this.start(),e.settings.hoverpause&&this.bind()},start:function(){var t=this;e.settings.autoplay&&f(this._i)&&(this._i=setInterval(function(){t.stop(),n.Run.make(">"),t.start()},this.time))},stop:function(){this._i=clearInterval(this._i)},bind:function(){var t=this;i.on("mouseover",n.Html.root,function(){t.stop()}),i.on("mouseout",n.Html.root,function(){t.start()})},unbind:function(){i.off(["mouseover","mouseout"],n.Html.root)}};return h(r,"time",{get:function(){var t=n.Html.slides[e.index].getAttribute("data-glide-autoplay");return y(t||e.settings.autoplay)}}),t.on(["destroy","update"],function(){r.unbind()}),t.on(["run.before","pause","destroy","swipe.start","update"],function(){r.stop()}),t.on(["run.after","play","swipe.end"],function(){r.start()}),t.on("update",function(){r.mount()}),t.on("destroy",function(){i.destroy()}),r},Breakpoints:function(t,e,n){var i=new x,r=t.settings,o=q(r.breakpoints),s=a({},r),u={match:function(t){if(void 0!==window.matchMedia)for(var e in t)if(t.hasOwnProperty(e)&&window.matchMedia("(max-width: "+e+"px)").matches)return t[e];return s}};return a(r,u.match(o)),i.on("resize",window,w(function(){t.settings=v(r,u.match(o))},t.settings.throttle)),n.on("update",function(){o=q(o),s=a({},r)}),n.on("destroy",function(){i.off("resize",window)}),u}};function G(){return i(this,G),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(G.__proto__||Object.getPrototypeOf(G)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(G,m),t(G,[{key:"mount",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};return function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(i):void 0}(G.prototype.__proto__||Object.getPrototypeOf(G.prototype),"mount",this).call(this,a({},W,e))}}]),G}),window.addEventListener("load",function(t){if(document.querySelector(".carousel")){var n=document.querySelector(".carousel-tools");n.scrollWidth>n.offsetWidth&&(n.style.justifyContent="flex-start");var e=new Glide(".carousel",{type:"carousel",perView:3,focusAt:"center",breakpoints:{1e3:{perView:2},640:{perView:1}}});function i(){var t=document.querySelector(".carousel .glide__slide--active"),e=t.previousElementSibling.querySelector(".carousel-item img"),n=t.querySelector(".carousel-item img"),i=t.nextElementSibling.querySelector(".carousel-item img");r(e),r(n),r(i)}function r(t){"false"===t.getAttribute("data-processed")&&(t.setAttribute("src",t.getAttribute("data-src")),t.setAttribute("data-processed","true"))}e.on("build.after",function(){i()}),e.on("move.after",function(){i()}),e.on("run.after",function(){var t=+document.querySelector(".glide__bullet--active").getAttribute("data-glide-dir").slice(1);console.log(t);var e=134*t;n.scrollLeft=e-(n.offsetWidth/2-67)}),e.mount()}}),window.addEventListener("load",function(t){if(document.querySelector(".js-arrow-btn")){var e=document.querySelector(".js-arrow-btn"),n=document.querySelector(".numbers-phone");e.addEventListener("click",function(){n.classList.toggle("numbers-phone--open")}),document.addEventListener("click",function(t){t.target.classList.contains("js-arrow-btn")||n.classList.remove("numbers-phone--open")})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZ2xvYmFsIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJHbGlkZSIsInRoaXMiLCJkZWZhdWx0cyIsInR5cGUiLCJzdGFydEF0IiwicGVyVmlldyIsImZvY3VzQXQiLCJnYXAiLCJhdXRvcGxheSIsImhvdmVycGF1c2UiLCJrZXlib2FyZCIsImJvdW5kIiwic3dpcGVUaHJlc2hvbGQiLCJkcmFnVGhyZXNob2xkIiwicGVyVG91Y2giLCJ0b3VjaFJhdGlvIiwidG91Y2hBbmdsZSIsImFuaW1hdGlvbkR1cmF0aW9uIiwicmV3aW5kIiwicmV3aW5kRHVyYXRpb24iLCJhbmltYXRpb25UaW1pbmdGdW5jIiwidGhyb3R0bGUiLCJkaXJlY3Rpb24iLCJwZWVrIiwiYnJlYWtwb2ludHMiLCJjbGFzc2VzIiwibHRyIiwicnRsIiwic2xpZGVyIiwiY2Fyb3VzZWwiLCJzd2lwZWFibGUiLCJkcmFnZ2luZyIsImNsb25lU2xpZGUiLCJhY3RpdmVOYXYiLCJhY3RpdmVTbGlkZSIsImRpc2FibGVkQXJyb3ciLCJ3YXJuIiwibXNnIiwiY29uc29sZSIsImVycm9yIiwiY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJjcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJfZXh0ZW5kcyIsImFzc2lnbiIsImFyZ3VtZW50cyIsInNvdXJjZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsInRvSW50IiwidmFsdWUiLCJwYXJzZUludCIsImlzU3RyaW5nIiwiaXNPYmplY3QiLCJpc0Z1bmN0aW9uIiwiaXNVbmRlZmluZWQiLCJpc0FycmF5IiwiQXJyYXkiLCJwcm9wIiwiZGVmaW5pdGlvbiIsIm1lcmdlT3B0aW9ucyIsInNldHRpbmdzIiwib3B0aW9ucyIsIkV2ZW50c0J1cyIsImV2ZW50IiwiaGFuZGxlciIsIm9uIiwiaG9wIiwiZXZlbnRzIiwiaW5kZXgiLCJwdXNoIiwicmVtb3ZlIiwiY29udGV4dCIsImVtaXQiLCJmb3JFYWNoIiwiaXRlbSIsInVuZGVmaW5lZCIsImV4dGVuc2lvbnMiLCJfZSIsIl9jIiwiZ2xpZGUiLCJjb21wb25lbnRzIiwibmFtZSIsIl9uYW1lIiwibW91bnQiLCJ0cmFuc2Zvcm1lcnMiLCJfdCIsInBhdHRlcm4iLCJSdW4iLCJtYWtlIiwiZGlzdGFuY2UiLCJUcmFuc2l0aW9uIiwiZGlzYWJsZSIsIk1vdmUiLCJpbnRlcnZhbCIsImRpc2FibGVkIiwiZ2V0IiwiX28iLCJzZXQiLCJvIiwiX2kiLCJfZCIsInN0YXR1cyIsInNlbGVjdG9yIiwibm93IiwiRGF0ZSIsImdldFRpbWUiLCJmdW5jIiwid2FpdCIsInRpbWVvdXQiLCJhcmdzIiwicmVzdWx0IiwicHJldmlvdXMiLCJsYXRlciIsImxlYWRpbmciLCJhcHBseSIsInRocm90dGxlZCIsImF0IiwicmVtYWluaW5nIiwiY2xlYXJUaW1lb3V0IiwidHJhaWxpbmciLCJzZXRUaW1lb3V0IiwiY2FuY2VsIiwiTUFSR0lOX1RZUEUiLCJzaWJsaW5ncyIsIm5vZGUiLCJwYXJlbnROb2RlIiwibiIsImZpcnN0Q2hpbGQiLCJtYXRjaGVkIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImV4aXN0Iiwid2luZG93IiwiSFRNTEVsZW1lbnQiLCJUUkFDS19TRUxFQ1RPUiIsIkV2ZW50c0JpbmRlciIsImVsIiwiY2xvc3VyZSIsImNhcHR1cmUiLCJsaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlZBTElEX0RJUkVDVElPTlMiLCJGTElQRURfTU9WRU1FTlRTIiwiPiIsIjwiLCI9IiwiUnRsIiwiQ29tcG9uZW50cyIsIm1vZGlmeSIsInRyYW5zbGF0ZSIsIkRpcmVjdGlvbiIsImlzIiwibXV0YXRvciIsIkV2ZW50cyIsIlRSQU5TRk9STUVSUyIsIkdhcHMiLCJDbG9uZXMiLCJncm93IiwiUGVlayIsImJlZm9yZSIsIndpZHRoIiwiU2l6ZXMiLCJzbGlkZVdpZHRoIiwiY29uY2F0IiwibXV0YXRlIiwidHJhbnNmb3JtZXIiLCJzdXBwb3J0c1Bhc3NpdmUiLCJvcHRzIiwiZSIsInN1cHBvcnRzUGFzc2l2ZSQxIiwiU1RBUlRfRVZFTlRTIiwiTU9WRV9FVkVOVFMiLCJFTkRfRVZFTlRTIiwiTU9VU0VfRVZFTlRTIiwic29ydEJyZWFrcG9pbnRzIiwicG9pbnRzIiwia2V5cyIsInNvcnQiLCJyZWR1Y2UiLCJyIiwiayIsIkNPTVBPTkVOVFMiLCJIdG1sIiwicm9vdCIsInRyYWNrIiwicXVlcnlTZWxlY3RvciIsInNsaWRlcyIsInNsaWNlIiwid3JhcHBlciIsImNoaWxkcmVuIiwiZmlsdGVyIiwic2xpZGUiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIl9yIiwiZG9jdW1lbnQiLCJ0IiwiVHJhbnNsYXRlIiwidHJhbnNmb3JtIiwic3R5bGUiLCJpc1R5cGUiLCJpc09mZnNldCIsImFmdGVyIiwibW92ZW1lbnQiLCJjb21wb3NlIiwicHJvcGVydHkiLCJkdXJhdGlvbiIsInRyYW5zaXRpb24iLCJjYWxsYmFjayIsImVuYWJsZSIsIm9mZnNldCIsInJlc29sdmUiLCJ0b2tlbiIsInNwbGl0Iiwiam9pbiIsImFkZENsYXNzIiwiYWRkIiwicmVtb3ZlQ2xhc3MiLCJfdiIsImluZGV4T2YiLCJzZXR1cFNsaWRlcyIsInNldHVwV3JhcHBlciIsIndyYXBwZXJTaXplIiwib2Zmc2V0V2lkdGgiLCJyZWR1Y3RvciIsImxlbiIsIm1hcmdpbkxlZnQiLCJtYXJnaW5SaWdodCIsIl90aGlzIiwiaXRlbXMiLCJjb2xsZWN0IiwiX0dsaWRlJHNldHRpbmdzIiwicGFydCIsInN0YXJ0IiwiZW5kIiwiTWF0aCIsIm1heCIsImZsb29yIiwiY2xvbmUiLCJjbG9uZU5vZGUiLCJfY2xvbmUiLCJ1bnNoaWZ0IiwiYXBwZW5kIiwiX0NvbXBvbmVudHMkSHRtbCIsImhhbGYiLCJwcmVwZW5kIiwicmV2ZXJzZSIsImFwcGVuZENoaWxkIiwiX2kyIiwiaW5zZXJ0QmVmb3JlIiwiX2kzIiwicmVtb3ZlQ2hpbGQiLCJSZXNpemUiLCJCaW5kZXIiLCJiaW5kIiwidW5iaW5kIiwib2ZmIiwiZGVzdHJveSIsIkJ1aWxkIiwidHlwZUNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJzaWJsaW5nIiwicmVtb3ZlQ2xhc3NlcyIsIm1vdmUiLCJjYWxjdWxhdGUiLCJpc1N0YXJ0IiwiaXNFbmQiLCJzdGVwcyIsImNvdW50YWJsZVN0ZXBzIiwibWluIiwiX20iLCJzdGVwIiwic3Vic3RyIiwiU3dpcGUiLCJzd2lwZVNpbiIsInN3aXBlU3RhcnRYIiwic3dpcGVTdGFydFkiLCJwYXNzaXZlIiwiYmluZFN3aXBlU3RhcnQiLCJzd2lwZSIsInRvdWNoZXMiLCJwYWdlWCIsInBhZ2VZIiwiYmluZFN3aXBlTW92ZSIsImJpbmRTd2lwZUVuZCIsInN1YkV4U3giLCJzdWJFeVN5IiwicG93RVgiLCJhYnMiLCJwb3dFWSIsInN3aXBlSHlwb3RlbnVzZSIsInNxcnQiLCJzd2lwZUNhdGhldHVzIiwiYXNpbiIsIlBJIiwic3RvcFByb3BhZ2F0aW9uIiwicGFyc2VGbG9hdCIsInRocmVzaG9sZCIsInN3aXBlRGlzdGFuY2UiLCJzd2lwZURlZyIsInJvdW5kIiwidW5iaW5kU3dpcGVNb3ZlIiwidW5iaW5kU3dpcGVFbmQiLCJ1bmJpbmRTd2lwZVN0YXJ0IiwiX3RoaXMyIiwiX3RoaXMzIiwiY2hhbmdlZFRvdWNoZXMiLCJJbWFnZXMiLCJkcmFnc3RhcnQiLCJwcmV2ZW50RGVmYXVsdCIsIkFuY2hvcnMiLCJkZXRhY2hlZCIsInByZXZlbnRlZCIsIl9hIiwicXVlcnlTZWxlY3RvckFsbCIsImNsaWNrIiwiZGV0YWNoIiwiZHJhZ2dhYmxlIiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiYXR0YWNoIiwiQ29udHJvbHMiLCJfbiIsImFkZEJpbmRpbmdzIiwic2V0QWN0aXZlIiwicmVtb3ZlQWN0aXZlIiwiY29udHJvbHMiLCJyZW1vdmVCaW5kaW5ncyIsImVsZW1lbnRzIiwiY3VycmVudFRhcmdldCIsIktleWJvYXJkIiwicHJlc3MiLCJrZXlDb2RlIiwiQXV0b3BsYXkiLCJzZXRJbnRlcnZhbCIsInN0b3AiLCJ0aW1lIiwiY2xlYXJJbnRlcnZhbCIsIkJyZWFrcG9pbnRzIiwibWF0Y2giLCJtYXRjaE1lZGlhIiwicG9pbnQiLCJtYXRjaGVzIiwiR2xpZGUkJDEiLCJzZWxmIiwiUmVmZXJlbmNlRXJyb3IiLCJwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwiX19wcm90b19fIiwiZ2V0UHJvdG90eXBlT2YiLCJzdWJDbGFzcyIsInN1cGVyQ2xhc3MiLCJjcmVhdGUiLCJzZXRQcm90b3R5cGVPZiIsImluaGVyaXRzIiwib2JqZWN0IiwicmVjZWl2ZXIiLCJGdW5jdGlvbiIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJwYXJlbnQiLCJnZXR0ZXIiLCJjYXJvdXNlbFRvb2xzIiwic2Nyb2xsV2lkdGgiLCJqdXN0aWZ5Q29udGVudCIsInNsaWRlcjIiLCIxMDAwIiwiNjQwIiwiZ2V0U2xpZGVzIiwicHJldiIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjZW50ZXIiLCJuZXh0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwic2V0SW1nIiwiYWN0aXZlVG9vbEluZGV4IiwibG9nIiwic2Nyb2xsVmFsIiwic2Nyb2xsTGVmdCIsImFycm93QnRuIiwibnVtYmVyc1Bob25lIiwidG9nZ2xlIl0sIm1hcHBpbmdzIjoiQ0FNQyxTQUFVQSxFQUFRQyxHQUNFLGlCQUFaQyxTQUEwQyxvQkFBWEMsT0FBeUJBLE9BQU9ELFFB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QixTQUFTVixjQUFjLGlCQUFrQixDQUN6QyxJQUFJa00sRUFBV3hMLFNBQVNWLGNBQWMsaUJBQ2xDbU0sRUFBZXpMLFNBQVNWLGNBQWMsa0JBQzFDa00sRUFBU2hQLGlCQUFpQixRQUFTLFdBQy9CaVAsRUFBYTVMLFVBQVU2TCxPQUFPLHlCQUdsQzFMLFNBQVN4RCxpQkFBaUIsUUFBUyxTQUFTNkIsR0FDcENBLEVBQUUxSSxPQUFPa0ssVUFBVUMsU0FBUyxpQkFDNUIyTCxFQUFhNUwsVUFBVTNILE9BQU8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxyXG4gKiBHbGlkZS5qcyB2My40LjFcclxuICogKGMpIDIwMTMtMjAxOSBKxJlkcnplaiBDaGHFgnViZWsgPGplZHJ6ZWouY2hhbHViZWtAZ21haWwuY29tPiAoaHR0cDovL2plZHJ6ZWpjaGFsdWJlay5jb20vKVxyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcclxuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XHJcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcclxuICAoZ2xvYmFsLkdsaWRlID0gZmFjdG9yeSgpKTtcclxufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XHJcblxyXG4gIHZhciBkZWZhdWx0cyA9IHtcclxuICAgIC8qKlxyXG4gICAgICogVHlwZSBvZiB0aGUgbW92ZW1lbnQuXHJcbiAgICAgKlxyXG4gICAgICogQXZhaWxhYmxlIHR5cGVzOlxyXG4gICAgICogYHNsaWRlcmAgLSBSZXdpbmRzIHNsaWRlciB0byB0aGUgc3RhcnQvZW5kIHdoZW4gaXQgcmVhY2hlcyB0aGUgZmlyc3Qgb3IgbGFzdCBzbGlkZS5cclxuICAgICAqIGBjYXJvdXNlbGAgLSBDaGFuZ2VzIHNsaWRlcyB3aXRob3V0IHN0YXJ0aW5nIG92ZXIgd2hlbiBpdCByZWFjaGVzIHRoZSBmaXJzdCBvciBsYXN0IHNsaWRlLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIHR5cGU6ICdzbGlkZXInLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgYXQgc3BlY2lmaWMgc2xpZGUgbnVtYmVyIGRlZmluZWQgd2l0aCB6ZXJvLWJhc2VkIGluZGV4LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHN0YXJ0QXQ6IDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIG51bWJlciBvZiBzbGlkZXMgdmlzaWJsZSBvbiB0aGUgc2luZ2xlIHZpZXdwb3J0LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHBlclZpZXc6IDEsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb2N1cyBjdXJyZW50bHkgYWN0aXZlIHNsaWRlIGF0IGEgc3BlY2lmaWVkIHBvc2l0aW9uIGluIHRoZSB0cmFjay5cclxuICAgICAqXHJcbiAgICAgKiBBdmFpbGFibGUgaW5wdXRzOlxyXG4gICAgICogYGNlbnRlcmAgLSBDdXJyZW50IHNsaWRlIHdpbGwgYmUgYWx3YXlzIGZvY3VzZWQgYXQgdGhlIGNlbnRlciBvZiBhIHRyYWNrLlxyXG4gICAgICogYDAsMSwyLDMuLi5gIC0gQ3VycmVudCBzbGlkZSB3aWxsIGJlIGZvY3VzZWQgb24gdGhlIHNwZWNpZmllZCB6ZXJvLWJhc2VkIGluZGV4LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtTdHJpbmd8TnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBmb2N1c0F0OiAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQSBzaXplIG9mIHRoZSBnYXAgYWRkZWQgYmV0d2VlbiBzbGlkZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2FwOiAxMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENoYW5nZSBzbGlkZXMgYWZ0ZXIgYSBzcGVjaWZpZWQgaW50ZXJ2YWwuIFVzZSBgZmFsc2VgIGZvciB0dXJuaW5nIG9mZiBhdXRvcGxheS5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfEJvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIFN0b3AgYXV0b3BsYXkgb24gbW91c2VvdmVyIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICBob3ZlcnBhdXNlOiB0cnVlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxsb3cgZm9yIGNoYW5naW5nIHNsaWRlcyB3aXRoIGxlZnQgYW5kIHJpZ2h0IGtleWJvYXJkIGFycm93cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAga2V5Ym9hcmQ6IHRydWUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIHJ1bm5pbmcgYHBlclZpZXdgIG51bWJlciBvZiBzbGlkZXMgZnJvbSB0aGUgZW5kLiBVc2UgdGhpc1xyXG4gICAgICogb3B0aW9uIGlmIHlvdSBkb24ndCB3YW50IHRvIGhhdmUgYW4gZW1wdHkgc3BhY2UgYWZ0ZXJcclxuICAgICAqIGEgc2xpZGVyLiBXb3JrcyBvbmx5IHdpdGggYHNsaWRlcmAgdHlwZSBhbmQgYVxyXG4gICAgICogbm9uLWNlbnRlcmVkIGBmb2N1c0F0YCBzZXR0aW5nLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICBib3VuZDogZmFsc2UsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNaW5pbWFsIHN3aXBlIGRpc3RhbmNlIG5lZWRlZCB0byBjaGFuZ2UgdGhlIHNsaWRlLiBVc2UgYGZhbHNlYCBmb3IgdHVybmluZyBvZmYgYSBzd2lwaW5nLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ8Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgc3dpcGVUaHJlc2hvbGQ6IDgwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWluaW1hbCBtb3VzZSBkcmFnIGRpc3RhbmNlIG5lZWRlZCB0byBjaGFuZ2UgdGhlIHNsaWRlLiBVc2UgYGZhbHNlYCBmb3IgdHVybmluZyBvZmYgYSBkcmFnZ2luZy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfEJvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGRyYWdUaHJlc2hvbGQ6IDEyMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgbWF4aW11bSBudW1iZXIgb2Ygc2xpZGVzIHRvIHdoaWNoIG1vdmVtZW50IHdpbGwgYmUgbWFkZSBvbiBzd2lwaW5nIG9yIGRyYWdnaW5nLiBVc2UgYGZhbHNlYCBmb3IgdW5saW1pdGVkLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ8Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgcGVyVG91Y2g6IGZhbHNlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92aW5nIGRpc3RhbmNlIHJhdGlvIG9mIHRoZSBzbGlkZXMgb24gYSBzd2lwaW5nIGFuZCBkcmFnZ2luZy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICovXHJcbiAgICB0b3VjaFJhdGlvOiAwLjUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBbmdsZSByZXF1aXJlZCB0byBhY3RpdmF0ZSBzbGlkZXMgbW92aW5nIG9uIHN3aXBpbmcgb3IgZHJhZ2dpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqL1xyXG4gICAgdG91Y2hBbmdsZTogNDUsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEdXJhdGlvbiBvZiB0aGUgYW5pbWF0aW9uIGluIG1pbGxpc2Vjb25kcy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBhbmltYXRpb25EdXJhdGlvbjogNDAwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxsb3dzIGxvb3BpbmcgdGhlIGBzbGlkZXJgIHR5cGUuIFNsaWRlciB3aWxsIHJld2luZCB0byB0aGUgZmlyc3QvbGFzdCBzbGlkZSB3aGVuIGl0J3MgYXQgdGhlIHN0YXJ0L2VuZC5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgcmV3aW5kOiB0cnVlLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRHVyYXRpb24gb2YgdGhlIHJld2luZGluZyBhbmltYXRpb24gb2YgdGhlIGBzbGlkZXJgIHR5cGUgaW4gbWlsbGlzZWNvbmRzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHJld2luZER1cmF0aW9uOiA4MDAsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFYXNpbmcgZnVuY3Rpb24gZm9yIHRoZSBhbmltYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge1N0cmluZ31cclxuICAgICAqL1xyXG4gICAgYW5pbWF0aW9uVGltaW5nRnVuYzogJ2N1YmljLWJlemllciguMTY1LCAuODQwLCAuNDQwLCAxKScsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaHJvdHRsZSBjb3N0bHkgZXZlbnRzIGF0IG1vc3Qgb25jZSBwZXIgZXZlcnkgd2FpdCBtaWxsaXNlY29uZHMuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge051bWJlcn1cclxuICAgICAqL1xyXG4gICAgdGhyb3R0bGU6IDEwLFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW92aW5nIGRpcmVjdGlvbiBtb2RlLlxyXG4gICAgICpcclxuICAgICAqIEF2YWlsYWJsZSBpbnB1dHM6XHJcbiAgICAgKiAtICdsdHInIC0gbGVmdCB0byByaWdodCBtb3ZlbWVudCxcclxuICAgICAqIC0gJ3J0bCcgLSByaWdodCB0byBsZWZ0IG1vdmVtZW50LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtTdHJpbmd9XHJcbiAgICAgKi9cclxuICAgIGRpcmVjdGlvbjogJ2x0cicsXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZGlzdGFuY2UgdmFsdWUgb2YgdGhlIG5leHQgYW5kIHByZXZpb3VzIHZpZXdwb3J0cyB3aGljaFxyXG4gICAgICogaGF2ZSB0byBwZWVrIGluIHRoZSBjdXJyZW50IHZpZXcuIEFjY2VwdHMgbnVtYmVyIGFuZFxyXG4gICAgICogcGl4ZWxzIGFzIGEgc3RyaW5nLiBMZWZ0IGFuZCByaWdodCBwZWVraW5nIGNhbiBiZVxyXG4gICAgICogc2V0IHVwIHNlcGFyYXRlbHkgd2l0aCBhIGRpcmVjdGlvbnMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlOlxyXG4gICAgICogYDEwMGAgLSBQZWVrIDEwMHB4IG9uIHRoZSBib3RoIHNpZGVzLlxyXG4gICAgICogeyBiZWZvcmU6IDEwMCwgYWZ0ZXI6IDUwIH1gIC0gUGVlayAxMDBweCBvbiB0aGUgbGVmdCBzaWRlIGFuZCA1MHB4IG9uIHRoZSByaWdodCBzaWRlLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ8U3RyaW5nfE9iamVjdH1cclxuICAgICAqL1xyXG4gICAgcGVlazogMCxcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbGxlY3Rpb24gb2Ygb3B0aW9ucyBhcHBsaWVkIGF0IHNwZWNpZmllZCBtZWRpYSBicmVha3BvaW50cy5cclxuICAgICAqIEZvciBleGFtcGxlOiBkaXNwbGF5IHR3byBzbGlkZXMgcGVyIHZpZXcgdW5kZXIgODAwcHguXHJcbiAgICAgKiBge1xyXG4gICAgICogICAnODAwcHgnOiB7XHJcbiAgICAgKiAgICAgcGVyVmlldzogMlxyXG4gICAgICogICB9XHJcbiAgICAgKiB9YFxyXG4gICAgICovXHJcbiAgICBicmVha3BvaW50czoge30sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb2xsZWN0aW9uIG9mIGludGVybmFsbHkgdXNlZCBIVE1MIGNsYXNzZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHRvZG8gUmVmYWN0b3IgYHNsaWRlcmAgYW5kIGBjYXJvdXNlbGAgcHJvcGVydGllcyB0byBzaW5nbGUgYHR5cGU6IHsgc2xpZGVyOiAnJywgY2Fyb3VzZWw6ICcnIH1gIG9iamVjdFxyXG4gICAgICogQHR5cGUge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgY2xhc3Nlczoge1xyXG4gICAgICBkaXJlY3Rpb246IHtcclxuICAgICAgICBsdHI6ICdnbGlkZS0tbHRyJyxcclxuICAgICAgICBydGw6ICdnbGlkZS0tcnRsJ1xyXG4gICAgICB9LFxyXG4gICAgICBzbGlkZXI6ICdnbGlkZS0tc2xpZGVyJyxcclxuICAgICAgY2Fyb3VzZWw6ICdnbGlkZS0tY2Fyb3VzZWwnLFxyXG4gICAgICBzd2lwZWFibGU6ICdnbGlkZS0tc3dpcGVhYmxlJyxcclxuICAgICAgZHJhZ2dpbmc6ICdnbGlkZS0tZHJhZ2dpbmcnLFxyXG4gICAgICBjbG9uZVNsaWRlOiAnZ2xpZGVfX3NsaWRlLS1jbG9uZScsXHJcbiAgICAgIGFjdGl2ZU5hdjogJ2dsaWRlX19idWxsZXQtLWFjdGl2ZScsXHJcbiAgICAgIGFjdGl2ZVNsaWRlOiAnZ2xpZGVfX3NsaWRlLS1hY3RpdmUnLFxyXG4gICAgICBkaXNhYmxlZEFycm93OiAnZ2xpZGVfX2Fycm93LS1kaXNhYmxlZCdcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAvKipcclxuICAgKiBPdXRwdXRzIHdhcm5pbmcgbWVzc2FnZSB0byB0aGUgYm93c2VyIGNvbnNvbGUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtTdHJpbmd9IG1zZ1xyXG4gICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gd2Fybihtc2cpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJbR2xpZGUgd2Fybl06IFwiICsgbXNnKTtcclxuICB9XHJcblxyXG4gIHZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIG9iajtcclxuICB9IDogZnVuY3Rpb24gKG9iaikge1xyXG4gICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xyXG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICB2YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XHJcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xyXG4gICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcclxuICAgICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XHJcbiAgICAgIGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7XHJcbiAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xyXG4gICAgICByZXR1cm4gQ29uc3RydWN0b3I7XHJcbiAgICB9O1xyXG4gIH0oKTtcclxuXHJcbiAgdmFyIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xyXG5cclxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XHJcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgfTtcclxuXHJcbiAgdmFyIGdldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikge1xyXG4gICAgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpO1xyXG5cclxuICAgIGlmIChkZXNjID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpO1xyXG5cclxuICAgICAgaWYgKHBhcmVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHtcclxuICAgICAgcmV0dXJuIGRlc2MudmFsdWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7XHJcblxyXG4gICAgICBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHZhciBpbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xyXG4gICAgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkge1xyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcclxuICAgICAgY29uc3RydWN0b3I6IHtcclxuICAgICAgICB2YWx1ZTogc3ViQ2xhc3MsXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xyXG4gIH07XHJcblxyXG4gIHZhciBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuID0gZnVuY3Rpb24gKHNlbGYsIGNhbGwpIHtcclxuICAgIGlmICghc2VsZikge1xyXG4gICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7XHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogQ29udmVydHMgdmFsdWUgZW50ZXJlZCBhcyBudW1iZXJcclxuICAgKiBvciBzdHJpbmcgdG8gaW50ZWdlciB2YWx1ZS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxyXG4gICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gdG9JbnQodmFsdWUpIHtcclxuICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDb252ZXJ0cyB2YWx1ZSBlbnRlcmVkIGFzIG51bWJlclxyXG4gICAqIG9yIHN0cmluZyB0byBmbGF0IHZhbHVlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXHJcbiAgICogQHJldHVybnMge051bWJlcn1cclxuICAgKi9cclxuICBmdW5jdGlvbiB0b0Zsb2F0KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIHZhbHVlIGlzIGEgc3RyaW5nLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7Kn0gICB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhbiBvYmplY3QuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHsqfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICpcclxuICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XHJcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsdWUpO1xyXG5cclxuICAgIHJldHVybiB0eXBlID09PSAnZnVuY3Rpb24nIHx8IHR5cGUgPT09ICdvYmplY3QnICYmICEhdmFsdWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tbWl4ZWQtb3BlcmF0b3JzXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIHZhbHVlIGlzIGEgbnVtYmVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7Kn0gdmFsdWVcclxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGlzTnVtYmVyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJztcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgdmFsdWUgaXMgYSBmdW5jdGlvbi5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAgeyp9IHZhbHVlXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyB1bmRlZmluZWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHsqfSB2YWx1ZVxyXG4gICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCB2YWx1ZSBpcyBhbiBhcnJheS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAgeyp9IHZhbHVlXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBmdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IgPT09IEFycmF5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ3JlYXRlcyBhbmQgaW5pdGlhbGl6ZXMgc3BlY2lmaWVkIGNvbGxlY3Rpb24gb2YgZXh0ZW5zaW9ucy5cclxuICAgKiBFYWNoIGV4dGVuc2lvbiByZWNlaXZlcyBhY2Nlc3MgdG8gaW5zdGFuY2Ugb2YgZ2xpZGUgYW5kIHJlc3Qgb2YgY29tcG9uZW50cy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBnbGlkZVxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbnNpb25zXHJcbiAgICpcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIG1vdW50KGdsaWRlLCBleHRlbnNpb25zLCBldmVudHMpIHtcclxuICAgIHZhciBjb21wb25lbnRzID0ge307XHJcblxyXG4gICAgZm9yICh2YXIgbmFtZSBpbiBleHRlbnNpb25zKSB7XHJcbiAgICAgIGlmIChpc0Z1bmN0aW9uKGV4dGVuc2lvbnNbbmFtZV0pKSB7XHJcbiAgICAgICAgY29tcG9uZW50c1tuYW1lXSA9IGV4dGVuc2lvbnNbbmFtZV0oZ2xpZGUsIGNvbXBvbmVudHMsIGV2ZW50cyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgd2FybignRXh0ZW5zaW9uIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZm9yICh2YXIgX25hbWUgaW4gY29tcG9uZW50cykge1xyXG4gICAgICBpZiAoaXNGdW5jdGlvbihjb21wb25lbnRzW19uYW1lXS5tb3VudCkpIHtcclxuICAgICAgICBjb21wb25lbnRzW19uYW1lXS5tb3VudCgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNvbXBvbmVudHM7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmVzIGdldHRlciBhbmQgc2V0dGVyIHByb3BlcnR5IG9uIHRoZSBzcGVjaWZpZWQgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBvYmogICAgICAgICBPYmplY3Qgd2hlcmUgcHJvcGVydHkgaGFzIHRvIGJlIGRlZmluZWQuXHJcbiAgICogQHBhcmFtICB7U3RyaW5nfSBwcm9wICAgICAgICBOYW1lIG9mIHRoZSBkZWZpbmVkIHByb3BlcnR5LlxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gZGVmaW5pdGlvbiAgR2V0IGFuZCBzZXQgZGVmaW5pdGlvbnMgZm9yIHRoZSBwcm9wZXJ0eS5cclxuICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIGRlZmluZShvYmosIHByb3AsIGRlZmluaXRpb24pIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIHByb3AsIGRlZmluaXRpb24pO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU29ydHMgYXBoYWJldGljYWxseSBvYmplY3Qga2V5cy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gb2JqXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNvcnRLZXlzKG9iaikge1xyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikuc29ydCgpLnJlZHVjZShmdW5jdGlvbiAociwgaykge1xyXG4gICAgICByW2tdID0gb2JqW2tdO1xyXG5cclxuICAgICAgcmV0dXJuIHJba10sIHI7XHJcbiAgICB9LCB7fSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBNZXJnZXMgcGFzc2VkIHNldHRpbmdzIG9iamVjdCB3aXRoIGRlZmF1bHQgb3B0aW9ucy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gZGVmYXVsdHNcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IHNldHRpbmdzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhkZWZhdWx0cywgc2V0dGluZ3MpIHtcclxuICAgIHZhciBvcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRzLCBzZXR0aW5ncyk7XHJcblxyXG4gICAgLy8gYE9iamVjdC5hc3NpZ25gIGRvIG5vdCBkZWVwbHkgbWVyZ2Ugb2JqZWN0cywgc28gd2VcclxuICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkgZm9yIGV2ZXJ5IG5lc3RlZCBvYmplY3RcclxuICAgIC8vIGluIG9wdGlvbnMuIEFsdGhvdWdoIGl0IGRvZXMgbm90IGxvb2sgc21hcnQsXHJcbiAgICAvLyBpdCdzIHNtYWxsZXIgYW5kIGZhc3RlciB0aGFuIHNvbWUgZmFuY3lcclxuICAgIC8vIG1lcmdpbmcgZGVlcC1tZXJnZSBhbGdvcml0aG0gc2NyaXB0LlxyXG4gICAgaWYgKHNldHRpbmdzLmhhc093blByb3BlcnR5KCdjbGFzc2VzJykpIHtcclxuICAgICAgb3B0aW9ucy5jbGFzc2VzID0gX2V4dGVuZHMoe30sIGRlZmF1bHRzLmNsYXNzZXMsIHNldHRpbmdzLmNsYXNzZXMpO1xyXG5cclxuICAgICAgaWYgKHNldHRpbmdzLmNsYXNzZXMuaGFzT3duUHJvcGVydHkoJ2RpcmVjdGlvbicpKSB7XHJcbiAgICAgICAgb3B0aW9ucy5jbGFzc2VzLmRpcmVjdGlvbiA9IF9leHRlbmRzKHt9LCBkZWZhdWx0cy5jbGFzc2VzLmRpcmVjdGlvbiwgc2V0dGluZ3MuY2xhc3Nlcy5kaXJlY3Rpb24pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNldHRpbmdzLmhhc093blByb3BlcnR5KCdicmVha3BvaW50cycpKSB7XHJcbiAgICAgIG9wdGlvbnMuYnJlYWtwb2ludHMgPSBfZXh0ZW5kcyh7fSwgZGVmYXVsdHMuYnJlYWtwb2ludHMsIHNldHRpbmdzLmJyZWFrcG9pbnRzKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxuICB9XHJcblxyXG4gIHZhciBFdmVudHNCdXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCBhIEV2ZW50QnVzIGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudHNcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRXZlbnRzQnVzKCkge1xyXG4gICAgICB2YXIgZXZlbnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRzQnVzKTtcclxuXHJcbiAgICAgIHRoaXMuZXZlbnRzID0gZXZlbnRzO1xyXG4gICAgICB0aGlzLmhvcCA9IGV2ZW50cy5oYXNPd25Qcm9wZXJ0eTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgbGlzdGVuZXIgdG8gdGhlIHNwZWNpZmVkIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBldmVudFxyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxyXG4gICAgICovXHJcblxyXG5cclxuICAgIGNyZWF0ZUNsYXNzKEV2ZW50c0J1cywgW3tcclxuICAgICAga2V5OiAnb24nLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaXNBcnJheShldmVudCkpIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5vbihldmVudFtpXSwgaGFuZGxlcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgdGhlIGV2ZW50J3Mgb2JqZWN0IGlmIG5vdCB5ZXQgY3JlYXRlZFxyXG4gICAgICAgIGlmICghdGhpcy5ob3AuY2FsbCh0aGlzLmV2ZW50cywgZXZlbnQpKSB7XHJcbiAgICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCB0aGUgaGFuZGxlciB0byBxdWV1ZVxyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZXZlbnRzW2V2ZW50XS5wdXNoKGhhbmRsZXIpIC0gMTtcclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZSBoYW5kbGUgYmFjayBmb3IgcmVtb3ZhbCBvZiBldmVudFxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW2V2ZW50XVtpbmRleF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJ1bnMgcmVnaXN0ZXJlZCBoYW5kbGVycyBmb3Igc3BlY2lmaWVkIGV2ZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ3xBcnJheX0gZXZlbnRcclxuICAgICAgICogQHBhcmFtIHtPYmplY3Q9fSBjb250ZXh0XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZW1pdCcsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBlbWl0KGV2ZW50LCBjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKGlzQXJyYXkoZXZlbnQpKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW1pdChldmVudFtpXSwgY29udGV4dCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB0aGUgZXZlbnQgZG9lc24ndCBleGlzdCwgb3IgdGhlcmUncyBubyBoYW5kbGVycyBpbiBxdWV1ZSwganVzdCBsZWF2ZVxyXG4gICAgICAgIGlmICghdGhpcy5ob3AuY2FsbCh0aGlzLmV2ZW50cywgZXZlbnQpKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDeWNsZSB0aHJvdWdoIGV2ZW50cyBxdWV1ZSwgZmlyZSFcclxuICAgICAgICB0aGlzLmV2ZW50c1tldmVudF0uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgaXRlbShjb250ZXh0IHx8IHt9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG4gICAgcmV0dXJuIEV2ZW50c0J1cztcclxuICB9KCk7XHJcblxyXG4gIHZhciBHbGlkZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0IGdsaWRlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gc2VsZWN0b3JcclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBHbGlkZShzZWxlY3Rvcikge1xyXG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XHJcbiAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEdsaWRlKTtcclxuXHJcbiAgICAgIHRoaXMuX2MgPSB7fTtcclxuICAgICAgdGhpcy5fdCA9IFtdO1xyXG4gICAgICB0aGlzLl9lID0gbmV3IEV2ZW50c0J1cygpO1xyXG5cclxuICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XHJcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSBtZXJnZU9wdGlvbnMoZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG4gICAgICB0aGlzLmluZGV4ID0gdGhpcy5zZXR0aW5ncy5zdGFydEF0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZXMgZ2xpZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuc2lvbnMgQ29sbGVjdGlvbiBvZiBleHRlbnNpb25zIHRvIGluaXRpYWxpemUuXHJcbiAgICAgKiBAcmV0dXJuIHtHbGlkZX1cclxuICAgICAqL1xyXG5cclxuXHJcbiAgICBjcmVhdGVDbGFzcyhHbGlkZSwgW3tcclxuICAgICAga2V5OiAnbW91bnQnLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbW91bnQkJDEoKSB7XHJcbiAgICAgICAgdmFyIGV4dGVuc2lvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xyXG5cclxuICAgICAgICB0aGlzLl9lLmVtaXQoJ21vdW50LmJlZm9yZScpO1xyXG5cclxuICAgICAgICBpZiAoaXNPYmplY3QoZXh0ZW5zaW9ucykpIHtcclxuICAgICAgICAgIHRoaXMuX2MgPSBtb3VudCh0aGlzLCBleHRlbnNpb25zLCB0aGlzLl9lKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgd2FybignWW91IG5lZWQgdG8gcHJvdmlkZSBhIG9iamVjdCBvbiBgbW91bnQoKWAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2UuZW1pdCgnbW91bnQuYWZ0ZXInKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDb2xsZWN0cyBhbiBpbnN0YW5jZSBgdHJhbnNsYXRlYCB0cmFuc2Zvcm1lcnMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge0FycmF5fSB0cmFuc2Zvcm1lcnMgQ29sbGVjdGlvbiBvZiB0cmFuc2Zvcm1lcnMuXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnbXV0YXRlJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG11dGF0ZSgpIHtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtZXJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBbXTtcclxuXHJcbiAgICAgICAgaWYgKGlzQXJyYXkodHJhbnNmb3JtZXJzKSkge1xyXG4gICAgICAgICAgdGhpcy5fdCA9IHRyYW5zZm9ybWVycztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgd2FybignWW91IG5lZWQgdG8gcHJvdmlkZSBhIGFycmF5IG9uIGBtdXRhdGUoKWAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVXBkYXRlcyBnbGlkZSB3aXRoIHNwZWNpZmllZCBzZXR0aW5ncy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzXHJcbiAgICAgICAqIEByZXR1cm4ge0dsaWRlfVxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ3VwZGF0ZScsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUoKSB7XHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IG1lcmdlT3B0aW9ucyh0aGlzLnNldHRpbmdzLCBzZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5oYXNPd25Qcm9wZXJ0eSgnc3RhcnRBdCcpKSB7XHJcbiAgICAgICAgICB0aGlzLmluZGV4ID0gc2V0dGluZ3Muc3RhcnRBdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2UuZW1pdCgndXBkYXRlJyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2hhbmdlIHNsaWRlIHdpdGggc3BlY2lmaWVkIHBhdHRlcm4uIEEgcGF0dGVybiBtdXN0IGJlIGluIHRoZSBzcGVjaWFsIGZvcm1hdDpcclxuICAgICAgICogYD5gIC0gTW92ZSBvbmUgZm9yd2FyZFxyXG4gICAgICAgKiBgPGAgLSBNb3ZlIG9uZSBiYWNrd2FyZFxyXG4gICAgICAgKiBgPXtpfWAgLSBHbyB0byB7aX0gemVyby1iYXNlZCBzbGlkZSAoZXEuICc9MScsIHdpbGwgZ28gdG8gc2Vjb25kIHNsaWRlKVxyXG4gICAgICAgKiBgPj5gIC0gUmV3aW5kcyB0byBlbmQgKGxhc3Qgc2xpZGUpXHJcbiAgICAgICAqIGA8PGAgLSBSZXdpbmRzIHRvIHN0YXJ0IChmaXJzdCBzbGlkZSlcclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdHRlcm5cclxuICAgICAgICogQHJldHVybiB7R2xpZGV9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZ28nLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ28ocGF0dGVybikge1xyXG4gICAgICAgIHRoaXMuX2MuUnVuLm1ha2UocGF0dGVybik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTW92ZSB0cmFjayBieSBzcGVjaWZpZWQgZGlzdGFuY2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXN0YW5jZVxyXG4gICAgICAgKiBAcmV0dXJuIHtHbGlkZX1cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6ICdtb3ZlJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmUoZGlzdGFuY2UpIHtcclxuICAgICAgICB0aGlzLl9jLlRyYW5zaXRpb24uZGlzYWJsZSgpO1xyXG4gICAgICAgIHRoaXMuX2MuTW92ZS5tYWtlKGRpc3RhbmNlKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEZXN0cm95IGluc3RhbmNlIGFuZCByZXZlcnQgYWxsIGNoYW5nZXMgZG9uZSBieSB0aGlzLl9jLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtHbGlkZX1cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6ICdkZXN0cm95JyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XHJcbiAgICAgICAgdGhpcy5fZS5lbWl0KCdkZXN0cm95Jyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU3RhcnQgaW5zdGFuY2UgYXV0b3BsYXlpbmcuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbnxOdW1iZXJ9IGludGVydmFsIFJ1biBhdXRvcGxheWluZyB3aXRoIHBhc3NlZCBpbnRlcnZhbCByZWdhcmRsZXNzIG9mIGBhdXRvcGxheWAgc2V0dGluZ3NcclxuICAgICAgICogQHJldHVybiB7R2xpZGV9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAncGxheScsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5KCkge1xyXG4gICAgICAgIHZhciBpbnRlcnZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChpbnRlcnZhbCkge1xyXG4gICAgICAgICAgdGhpcy5zZXR0aW5ncy5hdXRvcGxheSA9IGludGVydmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fZS5lbWl0KCdwbGF5Jyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU3RvcCBpbnN0YW5jZSBhdXRvcGxheWluZy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7R2xpZGV9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAncGF1c2UnLFxyXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZS5lbWl0KCdwYXVzZScpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgZ2xpZGUgaW50byBhIGlkbGUgc3RhdHVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtHbGlkZX1cclxuICAgICAgICovXHJcblxyXG4gICAgfSwge1xyXG4gICAgICBrZXk6ICdkaXNhYmxlJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XHJcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyBnbGlkZSBpbnRvIGEgYWN0aXZlIHN0YXR1cy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7R2xpZGV9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZW5hYmxlJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcclxuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQWRkcyBjdXV0b20gZXZlbnQgbGlzdGVuZXIgd2l0aCBoYW5kbGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXl9IGV2ZW50XHJcbiAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyXHJcbiAgICAgICAqIEByZXR1cm4ge0dsaWRlfVxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ29uJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50LCBoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5fZS5vbihldmVudCwgaGFuZGxlcik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2hlY2tzIGlmIGdsaWRlIGlzIGEgcHJlY2lzZWQgdHlwZS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnaXNUeXBlJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzVHlwZShuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MudHlwZSA9PT0gbmFtZTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgdmFsdWUgb2YgdGhlIGNvcmUgb3B0aW9ucy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ3NldHRpbmdzJyxcclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQkJDEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX287XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXRzIHZhbHVlIG9mIHRoZSBjb3JlIG9wdGlvbnMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge09iamVjdH0gb1xyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgLFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShvKSB7XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KG8pKSB7XHJcbiAgICAgICAgICB0aGlzLl9vID0gbztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgd2FybignT3B0aW9ucyBtdXN0IGJlIGFuIGBvYmplY3RgIGluc3RhbmNlLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgY3VycmVudCBpbmRleCBvZiB0aGUgc2xpZGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnaW5kZXgnLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgY3VycmVudCBpbmRleCBhIHNsaWRlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgLFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShpKSB7XHJcbiAgICAgICAgdGhpcy5faSA9IHRvSW50KGkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB0eXBlIG5hbWUgb2YgdGhlIHNsaWRlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICAgKi9cclxuXHJcbiAgICB9LCB7XHJcbiAgICAgIGtleTogJ3R5cGUnLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy50eXBlO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB2YWx1ZSBvZiB0aGUgaWRsZSBzdGF0dXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZGlzYWJsZWQnLFxyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCQkMSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgdmFsdWUgb2YgdGhlIGlkbGUgc3RhdHVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICAgKi9cclxuICAgICAgLFxyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCQkMShzdGF0dXMpIHtcclxuICAgICAgICB0aGlzLl9kID0gISFzdGF0dXM7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuICAgIHJldHVybiBHbGlkZTtcclxuICB9KCk7XHJcblxyXG4gIGZ1bmN0aW9uIFJ1biAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgdmFyIFJ1biA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEluaXRpYWxpemVzIGF1dG9ydW5uaW5nIG9mIHRoZSBnbGlkZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICB0aGlzLl9vID0gZmFsc2U7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1ha2VzIGdsaWRlcyBydW5uaW5nIGJhc2VkIG9uIHRoZSBwYXNzZWQgbW92aW5nIHNjaGVtYS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG1vdmVcclxuICAgICAgICovXHJcbiAgICAgIG1ha2U6IGZ1bmN0aW9uIG1ha2UobW92ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgIGlmICghR2xpZGUuZGlzYWJsZWQpIHtcclxuICAgICAgICAgIEdsaWRlLmRpc2FibGUoKTtcclxuXHJcbiAgICAgICAgICB0aGlzLm1vdmUgPSBtb3ZlO1xyXG5cclxuICAgICAgICAgIEV2ZW50cy5lbWl0KCdydW4uYmVmb3JlJywgdGhpcy5tb3ZlKTtcclxuXHJcbiAgICAgICAgICB0aGlzLmNhbGN1bGF0ZSgpO1xyXG5cclxuICAgICAgICAgIEV2ZW50cy5lbWl0KCdydW4nLCB0aGlzLm1vdmUpO1xyXG5cclxuICAgICAgICAgIENvbXBvbmVudHMuVHJhbnNpdGlvbi5hZnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc1N0YXJ0KCkpIHtcclxuICAgICAgICAgICAgICBFdmVudHMuZW1pdCgncnVuLnN0YXJ0JywgX3RoaXMubW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0VuZCgpKSB7XHJcbiAgICAgICAgICAgICAgRXZlbnRzLmVtaXQoJ3J1bi5lbmQnLCBfdGhpcy5tb3ZlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzT2Zmc2V0KCc8JykgfHwgX3RoaXMuaXNPZmZzZXQoJz4nKSkge1xyXG4gICAgICAgICAgICAgIF90aGlzLl9vID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgIEV2ZW50cy5lbWl0KCdydW4ub2Zmc2V0JywgX3RoaXMubW92ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEV2ZW50cy5lbWl0KCdydW4uYWZ0ZXInLCBfdGhpcy5tb3ZlKTtcclxuXHJcbiAgICAgICAgICAgIEdsaWRlLmVuYWJsZSgpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDYWxjdWxhdGVzIGN1cnJlbnQgaW5kZXggYmFzZWQgb24gZGVmaW5lZCBtb3ZlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgY2FsY3VsYXRlOiBmdW5jdGlvbiBjYWxjdWxhdGUoKSB7XHJcbiAgICAgICAgdmFyIG1vdmUgPSB0aGlzLm1vdmUsXHJcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xyXG4gICAgICAgIHZhciBzdGVwcyA9IG1vdmUuc3RlcHMsXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbiA9IG1vdmUuZGlyZWN0aW9uO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGNvdW50YWJsZVN0ZXBzID0gaXNOdW1iZXIodG9JbnQoc3RlcHMpKSAmJiB0b0ludChzdGVwcykgIT09IDA7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICBjYXNlICc+JzpcclxuICAgICAgICAgICAgaWYgKHN0ZXBzID09PSAnPicpIHtcclxuICAgICAgICAgICAgICBHbGlkZS5pbmRleCA9IGxlbmd0aDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRW5kKCkpIHtcclxuICAgICAgICAgICAgICBpZiAoIShHbGlkZS5pc1R5cGUoJ3NsaWRlcicpICYmICFHbGlkZS5zZXR0aW5ncy5yZXdpbmQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBHbGlkZS5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50YWJsZVN0ZXBzKSB7XHJcbiAgICAgICAgICAgICAgR2xpZGUuaW5kZXggKz0gTWF0aC5taW4obGVuZ3RoIC0gR2xpZGUuaW5kZXgsIC10b0ludChzdGVwcykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIEdsaWRlLmluZGV4Kys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSAnPCc6XHJcbiAgICAgICAgICAgIGlmIChzdGVwcyA9PT0gJzwnKSB7XHJcbiAgICAgICAgICAgICAgR2xpZGUuaW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNTdGFydCgpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKCEoR2xpZGUuaXNUeXBlKCdzbGlkZXInKSAmJiAhR2xpZGUuc2V0dGluZ3MucmV3aW5kKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbyA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgR2xpZGUuaW5kZXggPSBsZW5ndGg7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvdW50YWJsZVN0ZXBzKSB7XHJcbiAgICAgICAgICAgICAgR2xpZGUuaW5kZXggLT0gTWF0aC5taW4oR2xpZGUuaW5kZXgsIHRvSW50KHN0ZXBzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgR2xpZGUuaW5kZXgtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlICc9JzpcclxuICAgICAgICAgICAgR2xpZGUuaW5kZXggPSBzdGVwcztcclxuICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgd2FybignSW52YWxpZCBkaXJlY3Rpb24gcGF0dGVybiBbJyArIGRpcmVjdGlvbiArIHN0ZXBzICsgJ10gaGFzIGJlZW4gdXNlZCcpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENoZWNrcyBpZiB3ZSBhcmUgb24gdGhlIGZpcnN0IHNsaWRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxyXG4gICAgICAgKi9cclxuICAgICAgaXNTdGFydDogZnVuY3Rpb24gaXNTdGFydCgpIHtcclxuICAgICAgICByZXR1cm4gR2xpZGUuaW5kZXggPT09IDA7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENoZWNrcyBpZiB3ZSBhcmUgb24gdGhlIGxhc3Qgc2xpZGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBpc0VuZDogZnVuY3Rpb24gaXNFbmQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEdsaWRlLmluZGV4ID09PSB0aGlzLmxlbmd0aDtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQ2hlY2tzIGlmIHdlIGFyZSBtYWtpbmcgYSBvZmZzZXQgcnVuLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyZWN0aW9uXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBpc09mZnNldDogZnVuY3Rpb24gaXNPZmZzZXQoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX28gJiYgdGhpcy5tb3ZlLmRpcmVjdGlvbiA9PT0gZGlyZWN0aW9uO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRlZmluZShSdW4sICdtb3ZlJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB2YWx1ZSBvZiB0aGUgbW92ZSBzY2hlbWEuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyB2YWx1ZSBvZiB0aGUgbW92ZSBzY2hlbWEuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgICAqL1xyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBzdGVwID0gdmFsdWUuc3Vic3RyKDEpO1xyXG5cclxuICAgICAgICB0aGlzLl9tID0ge1xyXG4gICAgICAgICAgZGlyZWN0aW9uOiB2YWx1ZS5zdWJzdHIoMCwgMSksXHJcbiAgICAgICAgICBzdGVwczogc3RlcCA/IHRvSW50KHN0ZXApID8gdG9JbnQoc3RlcCkgOiBzdGVwIDogMFxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShSdW4sICdsZW5ndGgnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIHZhbHVlIG9mIHRoZSBydW5uaW5nIGRpc3RhbmNlIGJhc2VkXHJcbiAgICAgICAqIG9uIHplcm8taW5kZXhpbmcgbnVtYmVyIG9mIHNsaWRlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0gR2xpZGUuc2V0dGluZ3M7XHJcbiAgICAgICAgdmFyIGxlbmd0aCA9IENvbXBvbmVudHMuSHRtbC5zbGlkZXMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBJZiB0aGUgYGJvdW5kYCBvcHRpb24gaXMgYWNpdHZlLCBhIG1heGltdW0gcnVubmluZyBkaXN0YW5jZSBzaG91bGQgYmVcclxuICAgICAgICAvLyByZWR1Y2VkIGJ5IGBwZXJWaWV3YCBhbmQgYGZvY3VzQXRgIHNldHRpbmdzLiBSdW5uaW5nIGRpc3RhbmNlXHJcbiAgICAgICAgLy8gc2hvdWxkIGVuZCBiZWZvcmUgY3JlYXRpbmcgYW4gZW1wdHkgc3BhY2UgYWZ0ZXIgaW5zdGFuY2UuXHJcblxyXG4gICAgICAgIGlmIChHbGlkZS5pc1R5cGUoJ3NsaWRlcicpICYmIHNldHRpbmdzLmZvY3VzQXQgIT09ICdjZW50ZXInICYmIHNldHRpbmdzLmJvdW5kKSB7XHJcbiAgICAgICAgICByZXR1cm4gbGVuZ3RoIC0gMSAtICh0b0ludChzZXR0aW5ncy5wZXJWaWV3KSAtIDEpICsgdG9JbnQoc2V0dGluZ3MuZm9jdXNBdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbGVuZ3RoIC0gMTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVmaW5lKFJ1biwgJ29mZnNldCcsIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgc3RhdHVzIG9mIHRoZSBvZmZzZXR0aW5nIGZsYWcuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFJ1bjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFJldHVybnMgYSBjdXJyZW50IHRpbWUuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gbm93KCkge1xyXG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWRcclxuICAgKiBhdCBtb3N0IG9uY2UgZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXHJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcclxuICAgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcclxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cclxuICAgKlxyXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlXHJcbiAgICovXHJcbiAgZnVuY3Rpb24gdGhyb3R0bGUoZnVuYywgd2FpdCwgb3B0aW9ucykge1xyXG4gICAgdmFyIHRpbWVvdXQgPSB2b2lkIDAsXHJcbiAgICAgICAgY29udGV4dCA9IHZvaWQgMCxcclxuICAgICAgICBhcmdzID0gdm9pZCAwLFxyXG4gICAgICAgIHJlc3VsdCA9IHZvaWQgMDtcclxuICAgIHZhciBwcmV2aW91cyA9IDA7XHJcbiAgICBpZiAoIW9wdGlvbnMpIG9wdGlvbnMgPSB7fTtcclxuXHJcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcclxuICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IG5vdygpO1xyXG4gICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbiB0aHJvdHRsZWQoKSB7XHJcbiAgICAgIHZhciBhdCA9IG5vdygpO1xyXG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gYXQ7XHJcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKGF0IC0gcHJldmlvdXMpO1xyXG4gICAgICBjb250ZXh0ID0gdGhpcztcclxuICAgICAgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcclxuICAgICAgICBpZiAodGltZW91dCkge1xyXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByZXZpb3VzID0gYXQ7XHJcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xyXG4gICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHRocm90dGxlZC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgcHJldmlvdXMgPSAwO1xyXG4gICAgICB0aW1lb3V0ID0gY29udGV4dCA9IGFyZ3MgPSBudWxsO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gdGhyb3R0bGVkO1xyXG4gIH1cclxuXHJcbiAgdmFyIE1BUkdJTl9UWVBFID0ge1xyXG4gICAgbHRyOiBbJ21hcmdpbkxlZnQnLCAnbWFyZ2luUmlnaHQnXSxcclxuICAgIHJ0bDogWydtYXJnaW5SaWdodCcsICdtYXJnaW5MZWZ0J11cclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBHYXBzIChHbGlkZSwgQ29tcG9uZW50cywgRXZlbnRzKSB7XHJcbiAgICB2YXIgR2FwcyA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEFwcGxpZXMgZ2FwcyBiZXR3ZWVuIHNsaWRlcy4gRmlyc3QgYW5kIGxhc3RcclxuICAgICAgICogc2xpZGVzIGRvIG5vdCByZWNlaXZlIGl0J3MgZWRnZSBtYXJnaW5zLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge0hUTUxDb2xsZWN0aW9ufSBzbGlkZXNcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShzbGlkZXMpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2xpZGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICB2YXIgc3R5bGUgPSBzbGlkZXNbaV0uc3R5bGU7XHJcbiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gQ29tcG9uZW50cy5EaXJlY3Rpb24udmFsdWU7XHJcblxyXG4gICAgICAgICAgaWYgKGkgIT09IDApIHtcclxuICAgICAgICAgICAgc3R5bGVbTUFSR0lOX1RZUEVbZGlyZWN0aW9uXVswXV0gPSB0aGlzLnZhbHVlIC8gMiArICdweCc7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzdHlsZVtNQVJHSU5fVFlQRVtkaXJlY3Rpb25dWzBdXSA9ICcnO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGlmIChpICE9PSBzbGlkZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBzdHlsZVtNQVJHSU5fVFlQRVtkaXJlY3Rpb25dWzFdXSA9IHRoaXMudmFsdWUgLyAyICsgJ3B4JztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN0eWxlW01BUkdJTl9UWVBFW2RpcmVjdGlvbl1bMV1dID0gJyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZW1vdmVzIGdhcHMgZnJvbSB0aGUgc2xpZGVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge0hUTUxDb2xsZWN0aW9ufSBzbGlkZXNcclxuICAgICAgICogQHJldHVybnMge1ZvaWR9XHJcbiAgICAgICovXHJcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHNsaWRlcykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBzbGlkZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgIHZhciBzdHlsZSA9IHNsaWRlc1tpXS5zdHlsZTtcclxuXHJcbiAgICAgICAgICBzdHlsZS5tYXJnaW5MZWZ0ID0gJyc7XHJcbiAgICAgICAgICBzdHlsZS5tYXJnaW5SaWdodCA9ICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkZWZpbmUoR2FwcywgJ3ZhbHVlJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB2YWx1ZSBvZiB0aGUgZ2FwLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRvSW50KEdsaWRlLnNldHRpbmdzLmdhcCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShHYXBzLCAnZ3JvdycsIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgYWRkaXRpb25hbCBkaW1lbnRpb25zIHZhbHVlIGNhdXNlZCBieSBnYXBzLlxyXG4gICAgICAgKiBVc2VkIHRvIGluY3JlYXNlIHdpZHRoIG9mIHRoZSBzbGlkZXMgd3JhcHBlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge051bWJlcn1cclxuICAgICAgICovXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBHYXBzLnZhbHVlICogKENvbXBvbmVudHMuU2l6ZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShHYXBzLCAncmVkdWN0b3InLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIHJlZHVjdGlvbiB2YWx1ZSBjYXVzZWQgYnkgZ2Fwcy5cclxuICAgICAgICogVXNlZCB0byBzdWJ0cmFjdCB3aWR0aCBvZiB0aGUgc2xpZGVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgdmFyIHBlclZpZXcgPSBHbGlkZS5zZXR0aW5ncy5wZXJWaWV3O1xyXG5cclxuICAgICAgICByZXR1cm4gR2Fwcy52YWx1ZSAqIChwZXJWaWV3IC0gMSkgLyBwZXJWaWV3O1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFwcGx5IGNhbGN1bGF0ZWQgZ2FwczpcclxuICAgICAqIC0gYWZ0ZXIgYnVpbGRpbmcsIHNvIHNsaWRlcyAoaW5jbHVkaW5nIGNsb25lcykgd2lsbCByZWNlaXZlIHByb3BlciBtYXJnaW5zXHJcbiAgICAgKiAtIG9uIHVwZGF0aW5nIHZpYSBBUEksIHRvIHJlY2FsY3VsYXRlIGdhcHMgd2l0aCBuZXcgb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydidWlsZC5hZnRlcicsICd1cGRhdGUnXSwgdGhyb3R0bGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICBHYXBzLmFwcGx5KENvbXBvbmVudHMuSHRtbC53cmFwcGVyLmNoaWxkcmVuKTtcclxuICAgIH0sIDMwKSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgZ2FwczpcclxuICAgICAqIC0gb24gZGVzdHJveWluZyB0byBicmluZyBtYXJrdXAgdG8gaXRzIGluaXRhbCBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEdhcHMucmVtb3ZlKENvbXBvbmVudHMuSHRtbC53cmFwcGVyLmNoaWxkcmVuKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBHYXBzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRmluZHMgc2libGluZ3Mgbm9kZXMgb2YgdGhlIHBhc3NlZCBub2RlLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7RWxlbWVudH0gbm9kZVxyXG4gICAqIEByZXR1cm4ge0FycmF5fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNpYmxpbmdzKG5vZGUpIHtcclxuICAgIGlmIChub2RlICYmIG5vZGUucGFyZW50Tm9kZSkge1xyXG4gICAgICB2YXIgbiA9IG5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkO1xyXG4gICAgICB2YXIgbWF0Y2hlZCA9IFtdO1xyXG5cclxuICAgICAgZm9yICg7IG47IG4gPSBuLm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgaWYgKG4ubm9kZVR5cGUgPT09IDEgJiYgbiAhPT0gbm9kZSkge1xyXG4gICAgICAgICAgbWF0Y2hlZC5wdXNoKG4pO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG1hdGNoZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2tzIGlmIHBhc3NlZCBub2RlIGV4aXN0IGFuZCBpcyBhIHZhbGlkIGVsZW1lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtFbGVtZW50fSBub2RlXHJcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cclxuICAgKi9cclxuICBmdW5jdGlvbiBleGlzdChub2RlKSB7XHJcbiAgICBpZiAobm9kZSAmJiBub2RlIGluc3RhbmNlb2Ygd2luZG93LkhUTUxFbGVtZW50KSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIHZhciBUUkFDS19TRUxFQ1RPUiA9ICdbZGF0YS1nbGlkZS1lbD1cInRyYWNrXCJdJztcclxuXHJcbiAgZnVuY3Rpb24gSHRtbCAoR2xpZGUsIENvbXBvbmVudHMpIHtcclxuICAgIHZhciBIdG1sID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogU2V0dXAgc2xpZGVyIEhUTUwgbm9kZXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7R2xpZGV9IGdsaWRlXHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5yb290ID0gR2xpZGUuc2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy50cmFjayA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKFRSQUNLX1NFTEVDVE9SKTtcclxuICAgICAgICB0aGlzLnNsaWRlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMud3JhcHBlci5jaGlsZHJlbikuZmlsdGVyKGZ1bmN0aW9uIChzbGlkZSkge1xyXG4gICAgICAgICAgcmV0dXJuICFzbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoR2xpZGUuc2V0dGluZ3MuY2xhc3Nlcy5jbG9uZVNsaWRlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkZWZpbmUoSHRtbCwgJ3Jvb3QnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIG5vZGUgb2YgdGhlIGdsaWRlIG1haW4gZWxlbWVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEh0bWwuX3I7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgbm9kZSBvZiB0aGUgZ2xpZGUgbWFpbiBlbGVtZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgICAqL1xyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldChyKSB7XHJcbiAgICAgICAgaWYgKGlzU3RyaW5nKHIpKSB7XHJcbiAgICAgICAgICByID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChleGlzdChyKSkge1xyXG4gICAgICAgICAgSHRtbC5fciA9IHI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHdhcm4oJ1Jvb3QgZWxlbWVudCBtdXN0IGJlIGEgZXhpc3RpbmcgSHRtbCBub2RlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZWZpbmUoSHRtbCwgJ3RyYWNrJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBub2RlIG9mIHRoZSBnbGlkZSB0cmFjayB3aXRoIHNsaWRlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEh0bWwuX3Q7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgbm9kZSBvZiB0aGUgZ2xpZGUgdHJhY2sgd2l0aCBzbGlkZXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAgICovXHJcbiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHQpIHtcclxuICAgICAgICBpZiAoZXhpc3QodCkpIHtcclxuICAgICAgICAgIEh0bWwuX3QgPSB0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB3YXJuKCdDb3VsZCBub3QgZmluZCB0cmFjayBlbGVtZW50LiBQbGVhc2UgdXNlICcgKyBUUkFDS19TRUxFQ1RPUiArICcgYXR0cmlidXRlLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVmaW5lKEh0bWwsICd3cmFwcGVyJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBub2RlIG9mIHRoZSBzbGlkZXMgd3JhcHBlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIEh0bWwudHJhY2suY2hpbGRyZW5bMF07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBIdG1sO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gUGVlayAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgdmFyIFBlZWsgPSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXR1cHMgaG93IG11Y2ggdG8gcGVlayBiYXNlZCBvbiBzZXR0aW5ncy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICB0aGlzLnZhbHVlID0gR2xpZGUuc2V0dGluZ3MucGVlaztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkZWZpbmUoUGVlaywgJ3ZhbHVlJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyB2YWx1ZSBvZiB0aGUgcGVlay5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge051bWJlcnxPYmplY3R9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gUGVlay5fdjtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyB2YWx1ZSBvZiB0aGUgcGVlay5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ8T2JqZWN0fSB2YWx1ZVxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcclxuICAgICAgICBpZiAoaXNPYmplY3QodmFsdWUpKSB7XHJcbiAgICAgICAgICB2YWx1ZS5iZWZvcmUgPSB0b0ludCh2YWx1ZS5iZWZvcmUpO1xyXG4gICAgICAgICAgdmFsdWUuYWZ0ZXIgPSB0b0ludCh2YWx1ZS5hZnRlcik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHZhbHVlID0gdG9JbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgUGVlay5fdiA9IHZhbHVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZWZpbmUoUGVlaywgJ3JlZHVjdG9yJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyByZWR1Y3Rpb24gdmFsdWUgY2F1c2VkIGJ5IHBlZWsuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSBQZWVrLnZhbHVlO1xyXG4gICAgICAgIHZhciBwZXJWaWV3ID0gR2xpZGUuc2V0dGluZ3MucGVyVmlldztcclxuXHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHZhbHVlLmJlZm9yZSAvIHBlclZpZXcgKyB2YWx1ZS5hZnRlciAvIHBlclZpZXc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdmFsdWUgKiAyIC8gcGVyVmlldztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWNhbGN1bGF0ZSBwZWVraW5nIHNpemVzIG9uOlxyXG4gICAgICogLSB3aGVuIHJlc2l6aW5nIHdpbmRvdyB0byB1cGRhdGUgdG8gcHJvcGVyIHBlcmNlbnRzXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbihbJ3Jlc2l6ZScsICd1cGRhdGUnXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBQZWVrLm1vdW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gUGVlaztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIE1vdmUgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIHZhciBNb3ZlID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogQ29uc3RydWN0cyBtb3ZlIGNvbXBvbmVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5fbyA9IDA7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIENhbGN1bGF0ZXMgYSBtb3ZlbWVudCB2YWx1ZSBiYXNlZCBvbiBwYXNzZWQgb2Zmc2V0IGFuZCBjdXJyZW50bHkgYWN0aXZlIGluZGV4LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG9mZnNldFxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgbWFrZTogZnVuY3Rpb24gbWFrZSgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICB2YXIgb2Zmc2V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwO1xyXG5cclxuICAgICAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcclxuXHJcbiAgICAgICAgRXZlbnRzLmVtaXQoJ21vdmUnLCB7XHJcbiAgICAgICAgICBtb3ZlbWVudDogdGhpcy52YWx1ZVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBDb21wb25lbnRzLlRyYW5zaXRpb24uYWZ0ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgRXZlbnRzLmVtaXQoJ21vdmUuYWZ0ZXInLCB7XHJcbiAgICAgICAgICAgIG1vdmVtZW50OiBfdGhpcy52YWx1ZVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZGVmaW5lKE1vdmUsICdvZmZzZXQnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGFuIG9mZnNldCB2YWx1ZSB1c2VkIHRvIG1vZGlmeSBjdXJyZW50IHRyYW5zbGF0ZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIE1vdmUuX287XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHMgYW4gb2Zmc2V0IHZhbHVlIHVzZWQgdG8gbW9kaWZ5IGN1cnJlbnQgdHJhbnNsYXRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgICAqL1xyXG4gICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkge1xyXG4gICAgICAgIE1vdmUuX28gPSAhaXNVbmRlZmluZWQodmFsdWUpID8gdG9JbnQodmFsdWUpIDogMDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZGVmaW5lKE1vdmUsICd0cmFuc2xhdGUnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGEgcmF3IG1vdmVtZW50IHZhbHVlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gQ29tcG9uZW50cy5TaXplcy5zbGlkZVdpZHRoICogR2xpZGUuaW5kZXg7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShNb3ZlLCAndmFsdWUnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGFuIGFjdHVhbCBtb3ZlbWVudCB2YWx1ZSBjb3JyZWN0ZWQgYnkgb2Zmc2V0LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICB2YXIgb2Zmc2V0ID0gdGhpcy5vZmZzZXQ7XHJcbiAgICAgICAgdmFyIHRyYW5zbGF0ZSA9IHRoaXMudHJhbnNsYXRlO1xyXG5cclxuICAgICAgICBpZiAoQ29tcG9uZW50cy5EaXJlY3Rpb24uaXMoJ3J0bCcpKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlICsgb2Zmc2V0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZSAtIG9mZnNldDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYWtlIG1vdmVtZW50IHRvIHByb3BlciBzbGlkZSBvbjpcclxuICAgICAqIC0gYmVmb3JlIGJ1aWxkLCBzbyBnbGlkZSB3aWxsIHN0YXJ0IGF0IGBzdGFydEF0YCBpbmRleFxyXG4gICAgICogLSBvbiBlYWNoIHN0YW5kYXJkIHJ1biB0byBtb3ZlIHRvIG5ld2x5IGNhbGN1bGF0ZWQgaW5kZXhcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKFsnYnVpbGQuYmVmb3JlJywgJ3J1biddLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIE1vdmUubWFrZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIE1vdmU7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBTaXplcyAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgdmFyIFNpemVzID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogU2V0dXBzIGRpbWVudGlvbnMgb2Ygc2xpZGVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0dXBTbGlkZXM6IGZ1bmN0aW9uIHNldHVwU2xpZGVzKCkge1xyXG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc2xpZGVXaWR0aCArICdweCc7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IENvbXBvbmVudHMuSHRtbC5zbGlkZXM7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBzbGlkZXNbaV0uc3R5bGUud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFNldHVwcyBkaW1lbnRpb25zIG9mIHNsaWRlcyB3cmFwcGVyLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0dXBXcmFwcGVyOiBmdW5jdGlvbiBzZXR1cFdyYXBwZXIoZGltZW50aW9uKSB7XHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIuc3R5bGUud2lkdGggPSB0aGlzLndyYXBwZXJTaXplICsgJ3B4JztcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVtb3ZlcyBhcHBsaWVkIHN0eWxlcyBmcm9tIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IENvbXBvbmVudHMuSHRtbC5zbGlkZXM7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBzbGlkZXNbaV0uc3R5bGUud2lkdGggPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIENvbXBvbmVudHMuSHRtbC53cmFwcGVyLnN0eWxlLndpZHRoID0gJyc7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZGVmaW5lKFNpemVzLCAnbGVuZ3RoJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBjb3VudCBudW1iZXIgb2YgdGhlIHNsaWRlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIENvbXBvbmVudHMuSHRtbC5zbGlkZXMubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBkZWZpbmUoU2l6ZXMsICd3aWR0aCcsIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgd2lkdGggdmFsdWUgb2YgdGhlIGdsaWRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gQ29tcG9uZW50cy5IdG1sLnJvb3Qub2Zmc2V0V2lkdGg7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShTaXplcywgJ3dyYXBwZXJTaXplJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBzaXplIG9mIHRoZSBzbGlkZXMgd3JhcHBlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIFNpemVzLnNsaWRlV2lkdGggKiBTaXplcy5sZW5ndGggKyBDb21wb25lbnRzLkdhcHMuZ3JvdyArIENvbXBvbmVudHMuQ2xvbmVzLmdyb3c7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGRlZmluZShTaXplcywgJ3NsaWRlV2lkdGgnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIHdpZHRoIHZhbHVlIG9mIHRoZSBzaW5nbGUgc2xpZGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAgICovXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBTaXplcy53aWR0aCAvIEdsaWRlLnNldHRpbmdzLnBlclZpZXcgLSBDb21wb25lbnRzLlBlZWsucmVkdWN0b3IgLSBDb21wb25lbnRzLkdhcHMucmVkdWN0b3I7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwbHkgY2FsY3VsYXRlZCBnbGlkZSdzIGRpbWVuc2lvbnM6XHJcbiAgICAgKiAtIGJlZm9yZSBidWlsZGluZywgc28gb3RoZXIgZGltZW50aW9ucyAoZS5nLiB0cmFuc2xhdGUpIHdpbGwgYmUgY2FsY3VsYXRlZCBwcm9wZXJ0bHlcclxuICAgICAqIC0gd2hlbiByZXNpemluZyB3aW5kb3cgdG8gcmVjYWxjdWxhdGUgc2lsZGVzIGRpbWVuc2lvbnNcclxuICAgICAqIC0gb24gdXBkYXRpbmcgdmlhIEFQSSwgdG8gY2FsY3VsYXRlIGRpbWVuc2lvbnMgYmFzZWQgb24gbmV3IG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKFsnYnVpbGQuYmVmb3JlJywgJ3Jlc2l6ZScsICd1cGRhdGUnXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBTaXplcy5zZXR1cFNsaWRlcygpO1xyXG4gICAgICBTaXplcy5zZXR1cFdyYXBwZXIoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGNhbGN1bGF0ZWQgZ2xpZGUncyBkaW1lbnNpb25zOlxyXG4gICAgICogLSBvbiBkZXN0b3RpbmcgdG8gYnJpbmcgbWFya3VwIHRvIGl0cyBpbml0YWwgc3RhdGVcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBTaXplcy5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBTaXplcztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIEJ1aWxkIChHbGlkZSwgQ29tcG9uZW50cywgRXZlbnRzKSB7XHJcbiAgICB2YXIgQnVpbGQgPSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBJbml0IGdsaWRlIGJ1aWxkaW5nLiBBZGRzIGNsYXNzZXMsIHNldHNcclxuICAgICAgICogZGltZW5zaW9ucyBhbmQgc2V0dXBzIGluaXRpYWwgc3RhdGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgRXZlbnRzLmVtaXQoJ2J1aWxkLmJlZm9yZScpO1xyXG5cclxuICAgICAgICB0aGlzLnR5cGVDbGFzcygpO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MoKTtcclxuXHJcbiAgICAgICAgRXZlbnRzLmVtaXQoJ2J1aWxkLmFmdGVyJyk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEFkZHMgYHR5cGVgIGNsYXNzIHRvIHRoZSBnbGlkZSBlbGVtZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgdHlwZUNsYXNzOiBmdW5jdGlvbiB0eXBlQ2xhc3MoKSB7XHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLnJvb3QuY2xhc3NMaXN0LmFkZChHbGlkZS5zZXR0aW5ncy5jbGFzc2VzW0dsaWRlLnNldHRpbmdzLnR5cGVdKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyBhY3RpdmUgY2xhc3MgdG8gY3VycmVudCBzbGlkZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGFjdGl2ZUNsYXNzOiBmdW5jdGlvbiBhY3RpdmVDbGFzcygpIHtcclxuICAgICAgICB2YXIgY2xhc3NlcyA9IEdsaWRlLnNldHRpbmdzLmNsYXNzZXM7XHJcbiAgICAgICAgdmFyIHNsaWRlID0gQ29tcG9uZW50cy5IdG1sLnNsaWRlc1tHbGlkZS5pbmRleF07XHJcblxyXG4gICAgICAgIGlmIChzbGlkZSkge1xyXG4gICAgICAgICAgc2xpZGUuY2xhc3NMaXN0LmFkZChjbGFzc2VzLmFjdGl2ZVNsaWRlKTtcclxuXHJcbiAgICAgICAgICBzaWJsaW5ncyhzbGlkZSkuZm9yRWFjaChmdW5jdGlvbiAoc2libGluZykge1xyXG4gICAgICAgICAgICBzaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3Nlcy5hY3RpdmVTbGlkZSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZXMgSFRNTCBjbGFzc2VzIGFwcGxpZWQgYXQgYnVpbGRpbmcuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICByZW1vdmVDbGFzc2VzOiBmdW5jdGlvbiByZW1vdmVDbGFzc2VzKCkge1xyXG4gICAgICAgIHZhciBjbGFzc2VzID0gR2xpZGUuc2V0dGluZ3MuY2xhc3NlcztcclxuXHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLnJvb3QuY2xhc3NMaXN0LnJlbW92ZShjbGFzc2VzW0dsaWRlLnNldHRpbmdzLnR5cGVdKTtcclxuXHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLnNsaWRlcy5mb3JFYWNoKGZ1bmN0aW9uIChzaWJsaW5nKSB7XHJcbiAgICAgICAgICBzaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3Nlcy5hY3RpdmVTbGlkZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhciBidWlsZGluZyBjbGFzc2VzOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nIHRvIGJyaW5nIEhUTUwgdG8gaXRzIGluaXRpYWwgc3RhdGVcclxuICAgICAqIC0gb24gdXBkYXRpbmcgdG8gcmVtb3ZlIGNsYXNzZXMgYmVmb3JlIHJlbW91bnRpbmcgY29tcG9uZW50XHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbihbJ2Rlc3Ryb3knLCAndXBkYXRlJ10sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgQnVpbGQucmVtb3ZlQ2xhc3NlcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdW50IGNvbXBvbmVudDpcclxuICAgICAqIC0gb24gcmVzaXppbmcgb2YgdGhlIHdpbmRvdyB0byBjYWxjdWxhdGUgbmV3IGRpbWVudGlvbnNcclxuICAgICAqIC0gb24gdXBkYXRpbmcgc2V0dGluZ3MgdmlhIEFQSVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydyZXNpemUnLCAndXBkYXRlJ10sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgQnVpbGQubW91bnQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dhcCBhY3RpdmUgY2xhc3Mgb2YgY3VycmVudCBzbGlkZTpcclxuICAgICAqIC0gYWZ0ZXIgZWFjaCBtb3ZlIHRvIHRoZSBuZXcgaW5kZXhcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdtb3ZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBCdWlsZC5hY3RpdmVDbGFzcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEJ1aWxkO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gQ2xvbmVzIChHbGlkZSwgQ29tcG9uZW50cywgRXZlbnRzKSB7XHJcbiAgICB2YXIgQ2xvbmVzID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogQ3JlYXRlIHBhdHRlcm4gbWFwIGFuZCBjb2xsZWN0IHNsaWRlcyB0byBiZSBjbG9uZWQuXHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoR2xpZGUuaXNUeXBlKCdjYXJvdXNlbCcpKSB7XHJcbiAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5jb2xsZWN0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDb2xsZWN0IGNsb25lcyB3aXRoIHBhdHRlcm4uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBjb2xsZWN0OiBmdW5jdGlvbiBjb2xsZWN0KCkge1xyXG4gICAgICAgIHZhciBpdGVtcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107XHJcbiAgICAgICAgdmFyIHNsaWRlcyA9IENvbXBvbmVudHMuSHRtbC5zbGlkZXM7XHJcbiAgICAgICAgdmFyIF9HbGlkZSRzZXR0aW5ncyA9IEdsaWRlLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBwZXJWaWV3ID0gX0dsaWRlJHNldHRpbmdzLnBlclZpZXcsXHJcbiAgICAgICAgICAgIGNsYXNzZXMgPSBfR2xpZGUkc2V0dGluZ3MuY2xhc3NlcztcclxuXHJcblxyXG4gICAgICAgIHZhciBwZWVrSW5jcmVtZW50ZXIgPSArISFHbGlkZS5zZXR0aW5ncy5wZWVrO1xyXG4gICAgICAgIHZhciBwYXJ0ID0gcGVyVmlldyArIHBlZWtJbmNyZW1lbnRlcjtcclxuICAgICAgICB2YXIgc3RhcnQgPSBzbGlkZXMuc2xpY2UoMCwgcGFydCk7XHJcbiAgICAgICAgdmFyIGVuZCA9IHNsaWRlcy5zbGljZSgtcGFydCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihwZXJWaWV3IC8gc2xpZGVzLmxlbmd0aCkpOyByKyspIHtcclxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RhcnQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGNsb25lID0gc3RhcnRbaV0uY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgY2xvbmUuY2xhc3NMaXN0LmFkZChjbGFzc2VzLmNsb25lU2xpZGUpO1xyXG5cclxuICAgICAgICAgICAgaXRlbXMucHVzaChjbG9uZSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGVuZC5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIF9jbG9uZSA9IGVuZFtfaV0uY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgX2Nsb25lLmNsYXNzTGlzdC5hZGQoY2xhc3Nlcy5jbG9uZVNsaWRlKTtcclxuXHJcbiAgICAgICAgICAgIGl0ZW1zLnVuc2hpZnQoX2Nsb25lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQXBwZW5kIGNsb25lZCBzbGlkZXMgd2l0aCBnZW5lcmF0ZWQgcGF0dGVybi5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGFwcGVuZDogZnVuY3Rpb24gYXBwZW5kKCkge1xyXG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XHJcbiAgICAgICAgdmFyIF9Db21wb25lbnRzJEh0bWwgPSBDb21wb25lbnRzLkh0bWwsXHJcbiAgICAgICAgICAgIHdyYXBwZXIgPSBfQ29tcG9uZW50cyRIdG1sLndyYXBwZXIsXHJcbiAgICAgICAgICAgIHNsaWRlcyA9IF9Db21wb25lbnRzJEh0bWwuc2xpZGVzO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIGhhbGYgPSBNYXRoLmZsb29yKGl0ZW1zLmxlbmd0aCAvIDIpO1xyXG4gICAgICAgIHZhciBwcmVwZW5kID0gaXRlbXMuc2xpY2UoMCwgaGFsZikucmV2ZXJzZSgpO1xyXG4gICAgICAgIHZhciBhcHBlbmQgPSBpdGVtcy5zbGljZShoYWxmLCBpdGVtcy5sZW5ndGgpO1xyXG4gICAgICAgIHZhciB3aWR0aCA9IENvbXBvbmVudHMuU2l6ZXMuc2xpZGVXaWR0aCArICdweCc7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXBwZW5kLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGFwcGVuZFtpXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBwcmVwZW5kLmxlbmd0aDsgX2kyKyspIHtcclxuICAgICAgICAgIHdyYXBwZXIuaW5zZXJ0QmVmb3JlKHByZXBlbmRbX2kyXSwgc2xpZGVzWzBdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIF9pMyA9IDA7IF9pMyA8IGl0ZW1zLmxlbmd0aDsgX2kzKyspIHtcclxuICAgICAgICAgIGl0ZW1zW19pM10uc3R5bGUud2lkdGggPSB3aWR0aDtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZSBhbGwgY2xvbmVkIHNsaWRlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xyXG4gICAgICAgIHZhciBpdGVtcyA9IHRoaXMuaXRlbXM7XHJcblxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBDb21wb25lbnRzLkh0bWwud3JhcHBlci5yZW1vdmVDaGlsZChpdGVtc1tpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRlZmluZShDbG9uZXMsICdncm93Jywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBhZGRpdGlvbmFsIGRpbWVudGlvbnMgdmFsdWUgY2F1c2VkIGJ5IGNsb25lcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIChDb21wb25lbnRzLlNpemVzLnNsaWRlV2lkdGggKyBDb21wb25lbnRzLkdhcHMudmFsdWUpICogQ2xvbmVzLml0ZW1zLmxlbmd0aDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBlbmQgYWRkaXRpb25hbCBzbGlkZSdzIGNsb25lczpcclxuICAgICAqIC0gd2hpbGUgZ2xpZGUncyB0eXBlIGlzIGBjYXJvdXNlbGBcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIENsb25lcy5yZW1vdmUoKTtcclxuICAgICAgQ2xvbmVzLm1vdW50KCk7XHJcbiAgICAgIENsb25lcy5hcHBlbmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXBwZW5kIGFkZGl0aW9uYWwgc2xpZGUncyBjbG9uZXM6XHJcbiAgICAgKiAtIHdoaWxlIGdsaWRlJ3MgdHlwZSBpcyBgY2Fyb3VzZWxgXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbignYnVpbGQuYmVmb3JlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBpZiAoR2xpZGUuaXNUeXBlKCdjYXJvdXNlbCcpKSB7XHJcbiAgICAgICAgQ2xvbmVzLmFwcGVuZCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBjbG9uZXMgSFRNTEVsZW1lbnRzOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nLCB0byBicmluZyBIVE1MIHRvIGl0cyBpbml0aWFsIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgQ2xvbmVzLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIENsb25lcztcclxuICB9XHJcblxyXG4gIHZhciBFdmVudHNCaW5kZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdCBhIEV2ZW50c0JpbmRlciBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gRXZlbnRzQmluZGVyKCkge1xyXG4gICAgICB2YXIgbGlzdGVuZXJzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgRXZlbnRzQmluZGVyKTtcclxuXHJcbiAgICAgIHRoaXMubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWRkcyBldmVudHMgbGlzdGVuZXJzIHRvIGFycm93cyBIVE1MIGVsZW1lbnRzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ3xBcnJheX0gZXZlbnRzXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fFdpbmRvd3xEb2N1bWVudH0gZWxcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjbG9zdXJlXHJcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufE9iamVjdH0gY2FwdHVyZVxyXG4gICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAqL1xyXG5cclxuXHJcbiAgICBjcmVhdGVDbGFzcyhFdmVudHNCaW5kZXIsIFt7XHJcbiAgICAgIGtleTogJ29uJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uKGV2ZW50cywgZWwsIGNsb3N1cmUpIHtcclxuICAgICAgICB2YXIgY2FwdHVyZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7XHJcblxyXG4gICAgICAgIGlmIChpc1N0cmluZyhldmVudHMpKSB7XHJcbiAgICAgICAgICBldmVudHMgPSBbZXZlbnRzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXZlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tldmVudHNbaV1dID0gY2xvc3VyZTtcclxuXHJcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50c1tpXSwgdGhpcy5saXN0ZW5lcnNbZXZlbnRzW2ldXSwgY2FwdHVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgZnJvbSBhcnJvd3MgSFRNTCBlbGVtZW50cy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7U3RyaW5nfEFycmF5fSBldmVudHNcclxuICAgICAgICogQHBhcmFtICB7RWxlbWVudHxXaW5kb3d8RG9jdW1lbnR9IGVsXHJcbiAgICAgICAqIEBwYXJhbSAge0Jvb2xlYW58T2JqZWN0fSBjYXB0dXJlXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnb2ZmJyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9mZihldmVudHMsIGVsKSB7XHJcbiAgICAgICAgdmFyIGNhcHR1cmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoaXNTdHJpbmcoZXZlbnRzKSkge1xyXG4gICAgICAgICAgZXZlbnRzID0gW2V2ZW50c107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudHNbaV0sIHRoaXMubGlzdGVuZXJzW2V2ZW50c1tpXV0sIGNhcHR1cmUpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERlc3Ryb3kgY29sbGVjdGVkIGxpc3RlbmVycy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybnMge1ZvaWR9XHJcbiAgICAgICAqL1xyXG5cclxuICAgIH0sIHtcclxuICAgICAga2V5OiAnZGVzdHJveScsXHJcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVycztcclxuICAgICAgfVxyXG4gICAgfV0pO1xyXG4gICAgcmV0dXJuIEV2ZW50c0JpbmRlcjtcclxuICB9KCk7XHJcblxyXG4gIGZ1bmN0aW9uIFJlc2l6ZSAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW5jZSBvZiB0aGUgYmluZGVyIGZvciBET00gRXZlbnRzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtFdmVudHNCaW5kZXJ9XHJcbiAgICAgKi9cclxuICAgIHZhciBCaW5kZXIgPSBuZXcgRXZlbnRzQmluZGVyKCk7XHJcblxyXG4gICAgdmFyIFJlc2l6ZSA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEluaXRpYWxpemVzIHdpbmRvdyBiaW5kaW5ncy5cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICB0aGlzLmJpbmQoKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQmluZHMgYHJlenNpemVgIGxpc3RlbmVyIHRvIHRoZSB3aW5kb3cuXHJcbiAgICAgICAqIEl0J3MgYSBjb3N0bHkgZXZlbnQsIHNvIHdlIGFyZSBkZWJvdW5jaW5nIGl0LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgICBCaW5kZXIub24oJ3Jlc2l6ZScsIHdpbmRvdywgdGhyb3R0bGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgRXZlbnRzLmVtaXQoJ3Jlc2l6ZScpO1xyXG4gICAgICAgIH0sIEdsaWRlLnNldHRpbmdzLnRocm90dGxlKSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuYmluZHMgbGlzdGVuZXJzIGZyb20gdGhlIHdpbmRvdy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICAgIEJpbmRlci5vZmYoJ3Jlc2l6ZScsIHdpbmRvdyk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYmluZGluZ3MgZnJvbSB3aW5kb3c6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcsIHRvIHJlbW92ZSBhZGRlZCBFdmVudExpc3RlbmVyXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgUmVzaXplLnVuYmluZCgpO1xyXG4gICAgICBCaW5kZXIuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFJlc2l6ZTtcclxuICB9XHJcblxyXG4gIHZhciBWQUxJRF9ESVJFQ1RJT05TID0gWydsdHInLCAncnRsJ107XHJcbiAgdmFyIEZMSVBFRF9NT1ZFTUVOVFMgPSB7XHJcbiAgICAnPic6ICc8JyxcclxuICAgICc8JzogJz4nLFxyXG4gICAgJz0nOiAnPSdcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBEaXJlY3Rpb24gKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIHZhciBEaXJlY3Rpb24gPSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXR1cHMgZ2FwIHZhbHVlIGJhc2VkIG9uIHNldHRpbmdzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgbW91bnQ6IGZ1bmN0aW9uIG1vdW50KCkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSBHbGlkZS5zZXR0aW5ncy5kaXJlY3Rpb247XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlc29sdmVzIHBhdHRlcm4gYmFzZWQgb24gZGlyZWN0aW9uIHZhbHVlXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXR0ZXJuXHJcbiAgICAgICAqIEByZXR1cm5zIHtTdHJpbmd9XHJcbiAgICAgICAqL1xyXG4gICAgICByZXNvbHZlOiBmdW5jdGlvbiByZXNvbHZlKHBhdHRlcm4pIHtcclxuICAgICAgICB2YXIgdG9rZW4gPSBwYXR0ZXJuLnNsaWNlKDAsIDEpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pcygncnRsJykpIHtcclxuICAgICAgICAgIHJldHVybiBwYXR0ZXJuLnNwbGl0KHRva2VuKS5qb2luKEZMSVBFRF9NT1ZFTUVOVFNbdG9rZW5dKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwYXR0ZXJuO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBDaGVja3MgdmFsdWUgb2YgZGlyZWN0aW9uIG1vZGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJlY3Rpb25cclxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XHJcbiAgICAgICAqL1xyXG4gICAgICBpczogZnVuY3Rpb24gaXMoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IGRpcmVjdGlvbjtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQXBwbGllcyBkaXJlY3Rpb24gY2xhc3MgdG8gdGhlIHJvb3QgSFRNTCBlbGVtZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uIGFkZENsYXNzKCkge1xyXG4gICAgICAgIENvbXBvbmVudHMuSHRtbC5yb290LmNsYXNzTGlzdC5hZGQoR2xpZGUuc2V0dGluZ3MuY2xhc3Nlcy5kaXJlY3Rpb25bdGhpcy52YWx1ZV0pO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZW1vdmVzIGRpcmVjdGlvbiBjbGFzcyBmcm9tIHRoZSByb290IEhUTUwgZWxlbWVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiByZW1vdmVDbGFzcygpIHtcclxuICAgICAgICBDb21wb25lbnRzLkh0bWwucm9vdC5jbGFzc0xpc3QucmVtb3ZlKEdsaWRlLnNldHRpbmdzLmNsYXNzZXMuZGlyZWN0aW9uW3RoaXMudmFsdWVdKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkZWZpbmUoRGlyZWN0aW9uLCAndmFsdWUnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIHZhbHVlIG9mIHRoZSBkaXJlY3Rpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gRGlyZWN0aW9uLl92O1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXRzIHZhbHVlIG9mIHRoZSBkaXJlY3Rpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcclxuICAgICAgICBpZiAoVkFMSURfRElSRUNUSU9OUy5pbmRleE9mKHZhbHVlKSA+IC0xKSB7XHJcbiAgICAgICAgICBEaXJlY3Rpb24uX3YgPSB2YWx1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgd2FybignRGlyZWN0aW9uIHZhbHVlIG11c3QgYmUgYGx0cmAgb3IgYHJ0bGAnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXIgZGlyZWN0aW9uIGNsYXNzOlxyXG4gICAgICogLSBvbiBkZXN0cm95IHRvIGJyaW5nIEhUTUwgdG8gaXRzIGluaXRpYWwgc3RhdGVcclxuICAgICAqIC0gb24gdXBkYXRlIHRvIHJlbW92ZSBjbGFzcyBiZWZvcmUgcmVhcHBsaW5nIGJlbGxvd1xyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydkZXN0cm95JywgJ3VwZGF0ZSddLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIERpcmVjdGlvbi5yZW1vdmVDbGFzcygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdW50IGNvbXBvbmVudDpcclxuICAgICAqIC0gb24gdXBkYXRlIHRvIHJlZmxlY3QgY2hhbmdlcyBpbiBkaXJlY3Rpb24gdmFsdWVcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIERpcmVjdGlvbi5tb3VudCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBcHBseSBkaXJlY3Rpb24gY2xhc3M6XHJcbiAgICAgKiAtIGJlZm9yZSBidWlsZGluZyB0byBhcHBseSBjbGFzcyBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAqIC0gb24gdXBkYXRpbmcgdG8gcmVhcHBseSBkaXJlY3Rpb24gY2xhc3MgdGhhdCBtYXkgY2hhbmdlZFxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydidWlsZC5iZWZvcmUnLCAndXBkYXRlJ10sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgRGlyZWN0aW9uLmFkZENsYXNzKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gRGlyZWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogUmVmbGVjdHMgdmFsdWUgb2YgZ2xpZGUgbW92ZW1lbnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IEdsaWRlXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBDb21wb25lbnRzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIFJ0bCAoR2xpZGUsIENvbXBvbmVudHMpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBOZWdhdGVzIHRoZSBwYXNzZWQgdHJhbnNsYXRlIGlmIGdsaWRlIGlzIGluIFJUTCBvcHRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge051bWJlcn0gdHJhbnNsYXRlXHJcbiAgICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAgICovXHJcbiAgICAgIG1vZGlmeTogZnVuY3Rpb24gbW9kaWZ5KHRyYW5zbGF0ZSkge1xyXG4gICAgICAgIGlmIChDb21wb25lbnRzLkRpcmVjdGlvbi5pcygncnRsJykpIHtcclxuICAgICAgICAgIHJldHVybiAtdHJhbnNsYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgZ2xpZGUgbW92ZW1lbnQgd2l0aCBhIGBnYXBgIHNldHRpbmdzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBHbGlkZVxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gQ29tcG9uZW50c1xyXG4gICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgKi9cclxuICBmdW5jdGlvbiBHYXAgKEdsaWRlLCBDb21wb25lbnRzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvKipcclxuICAgICAgICogTW9kaWZpZXMgcGFzc2VkIHRyYW5zbGF0ZSB2YWx1ZSB3aXRoIG51bWJlciBpbiB0aGUgYGdhcGAgc2V0dGluZ3MuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge051bWJlcn0gdHJhbnNsYXRlXHJcbiAgICAgICAqIEByZXR1cm4ge051bWJlcn1cclxuICAgICAgICovXHJcbiAgICAgIG1vZGlmeTogZnVuY3Rpb24gbW9kaWZ5KHRyYW5zbGF0ZSkge1xyXG4gICAgICAgIHJldHVybiB0cmFuc2xhdGUgKyBDb21wb25lbnRzLkdhcHMudmFsdWUgKiBHbGlkZS5pbmRleDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgZ2xpZGUgbW92ZW1lbnQgd2l0aCB3aWR0aCBvZiBhZGRpdGlvbmFsIGNsb25lcyB3aWR0aC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gR2xpZGVcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IENvbXBvbmVudHNcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gR3JvdyAoR2xpZGUsIENvbXBvbmVudHMpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBZGRzIHRvIHRoZSBwYXNzZWQgdHJhbnNsYXRlIHdpZHRoIG9mIHRoZSBoYWxmIG9mIGNsb25lcy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7TnVtYmVyfSB0cmFuc2xhdGVcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgbW9kaWZ5OiBmdW5jdGlvbiBtb2RpZnkodHJhbnNsYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZSArIENvbXBvbmVudHMuQ2xvbmVzLmdyb3cgLyAyO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogVXBkYXRlcyBnbGlkZSBtb3ZlbWVudCB3aXRoIGEgYHBlZWtgIHNldHRpbmdzLlxyXG4gICAqXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBHbGlkZVxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gQ29tcG9uZW50c1xyXG4gICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgKi9cclxuICBmdW5jdGlvbiBQZWVraW5nIChHbGlkZSwgQ29tcG9uZW50cykge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIE1vZGlmaWVzIHBhc3NlZCB0cmFuc2xhdGUgdmFsdWUgd2l0aCBhIGBwZWVrYCBzZXR0aW5nLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHRyYW5zbGF0ZVxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb2RpZnk6IGZ1bmN0aW9uIG1vZGlmeSh0cmFuc2xhdGUpIHtcclxuICAgICAgICBpZiAoR2xpZGUuc2V0dGluZ3MuZm9jdXNBdCA+PSAwKSB7XHJcbiAgICAgICAgICB2YXIgcGVlayA9IENvbXBvbmVudHMuUGVlay52YWx1ZTtcclxuXHJcbiAgICAgICAgICBpZiAoaXNPYmplY3QocGVlaykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZSAtIHBlZWsuYmVmb3JlO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHJldHVybiB0cmFuc2xhdGUgLSBwZWVrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRyYW5zbGF0ZTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFVwZGF0ZXMgZ2xpZGUgbW92ZW1lbnQgd2l0aCBhIGBmb2N1c0F0YCBzZXR0aW5ncy5cclxuICAgKlxyXG4gICAqIEBwYXJhbSAge09iamVjdH0gR2xpZGVcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IENvbXBvbmVudHNcclxuICAgKiBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICovXHJcbiAgZnVuY3Rpb24gRm9jdXNpbmcgKEdsaWRlLCBDb21wb25lbnRzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAvKipcclxuICAgICAgICogTW9kaWZpZXMgcGFzc2VkIHRyYW5zbGF0ZSB2YWx1ZSB3aXRoIGluZGV4IGluIHRoZSBgZm9jdXNBdGAgc2V0dGluZy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7TnVtYmVyfSB0cmFuc2xhdGVcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgbW9kaWZ5OiBmdW5jdGlvbiBtb2RpZnkodHJhbnNsYXRlKSB7XHJcbiAgICAgICAgdmFyIGdhcCA9IENvbXBvbmVudHMuR2Fwcy52YWx1ZTtcclxuICAgICAgICB2YXIgd2lkdGggPSBDb21wb25lbnRzLlNpemVzLndpZHRoO1xyXG4gICAgICAgIHZhciBmb2N1c0F0ID0gR2xpZGUuc2V0dGluZ3MuZm9jdXNBdDtcclxuICAgICAgICB2YXIgc2xpZGVXaWR0aCA9IENvbXBvbmVudHMuU2l6ZXMuc2xpZGVXaWR0aDtcclxuXHJcbiAgICAgICAgaWYgKGZvY3VzQXQgPT09ICdjZW50ZXInKSB7XHJcbiAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlIC0gKHdpZHRoIC8gMiAtIHNsaWRlV2lkdGggLyAyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cmFuc2xhdGUgLSBzbGlkZVdpZHRoICogZm9jdXNBdCAtIGdhcCAqIGZvY3VzQXQ7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBBcHBsaWVzIGRpZmZyZW50IHRyYW5zZm9ybWVycyBvbiB0cmFuc2xhdGUgdmFsdWUuXHJcbiAgICpcclxuICAgKiBAcGFyYW0gIHtPYmplY3R9IEdsaWRlXHJcbiAgICogQHBhcmFtICB7T2JqZWN0fSBDb21wb25lbnRzXHJcbiAgICogQHJldHVybiB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIG11dGF0b3IgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogTWVyZ2UgaW5zdGFuY2UgdHJhbnNmb3JtZXJzIHdpdGggY29sbGVjdGlvbiBvZiBkZWZhdWx0IHRyYW5zZm9ybWVycy5cclxuICAgICAqIEl0J3MgaW1wb3J0YW50IHRoYXQgdGhlIFJ0bCBjb21wb25lbnQgYmUgbGFzdCBvbiB0aGUgbGlzdCxcclxuICAgICAqIHNvIGl0IHJlZmxlY3RzIGFsbCBwcmV2aW91cyB0cmFuc2Zvcm1hdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge0FycmF5fVxyXG4gICAgICovXHJcbiAgICB2YXIgVFJBTlNGT1JNRVJTID0gW0dhcCwgR3JvdywgUGVla2luZywgRm9jdXNpbmddLmNvbmNhdChHbGlkZS5fdCwgW1J0bF0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBQaXBsaW5lcyB0cmFuc2xhdGUgdmFsdWUgd2l0aCByZWdpc3RlcmVkIHRyYW5zZm9ybWVycy5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7TnVtYmVyfSB0cmFuc2xhdGVcclxuICAgICAgICogQHJldHVybiB7TnVtYmVyfVxyXG4gICAgICAgKi9cclxuICAgICAgbXV0YXRlOiBmdW5jdGlvbiBtdXRhdGUodHJhbnNsYXRlKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBUUkFOU0ZPUk1FUlMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHZhciB0cmFuc2Zvcm1lciA9IFRSQU5TRk9STUVSU1tpXTtcclxuXHJcbiAgICAgICAgICBpZiAoaXNGdW5jdGlvbih0cmFuc2Zvcm1lcikgJiYgaXNGdW5jdGlvbih0cmFuc2Zvcm1lcigpLm1vZGlmeSkpIHtcclxuICAgICAgICAgICAgdHJhbnNsYXRlID0gdHJhbnNmb3JtZXIoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykubW9kaWZ5KHRyYW5zbGF0ZSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3YXJuKCdUcmFuc2Zvcm1lciBzaG91bGQgYmUgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gb2JqZWN0IHdpdGggYG1vZGlmeSgpYCBtZXRob2QnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0cmFuc2xhdGU7XHJcbiAgICAgIH1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBUcmFuc2xhdGUgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIHZhciBUcmFuc2xhdGUgPSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXRzIHZhbHVlIG9mIHRyYW5zbGF0ZSBvbiBIVE1MIGVsZW1lbnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB2YWx1ZVxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHtcclxuICAgICAgICB2YXIgdHJhbnNmb3JtID0gbXV0YXRvcihHbGlkZSwgQ29tcG9uZW50cykubXV0YXRlKHZhbHVlKTtcclxuXHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKCcgKyAtMSAqIHRyYW5zZm9ybSArICdweCwgMHB4LCAwcHgpJztcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUmVtb3ZlcyB2YWx1ZSBvZiB0cmFuc2xhdGUgZnJvbSBIVE1MIGVsZW1lbnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcclxuICAgICAgICBDb21wb25lbnRzLkh0bWwud3JhcHBlci5zdHlsZS50cmFuc2Zvcm0gPSAnJztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldCBuZXcgdHJhbnNsYXRlIHZhbHVlOlxyXG4gICAgICogLSBvbiBtb3ZlIHRvIHJlZmxlY3QgaW5kZXggY2hhbmdlXHJcbiAgICAgKiAtIG9uIHVwZGF0aW5nIHZpYSBBUEkgdG8gcmVmbGVjdCBwb3NzaWJsZSBjaGFuZ2VzIGluIG9wdGlvbnNcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdtb3ZlJywgZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgdmFyIGdhcCA9IENvbXBvbmVudHMuR2Fwcy52YWx1ZTtcclxuICAgICAgdmFyIGxlbmd0aCA9IENvbXBvbmVudHMuU2l6ZXMubGVuZ3RoO1xyXG4gICAgICB2YXIgd2lkdGggPSBDb21wb25lbnRzLlNpemVzLnNsaWRlV2lkdGg7XHJcblxyXG4gICAgICBpZiAoR2xpZGUuaXNUeXBlKCdjYXJvdXNlbCcpICYmIENvbXBvbmVudHMuUnVuLmlzT2Zmc2V0KCc8JykpIHtcclxuICAgICAgICBDb21wb25lbnRzLlRyYW5zaXRpb24uYWZ0ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgRXZlbnRzLmVtaXQoJ3RyYW5zbGF0ZS5qdW1wJyk7XHJcblxyXG4gICAgICAgICAgVHJhbnNsYXRlLnNldCh3aWR0aCAqIChsZW5ndGggLSAxKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBUcmFuc2xhdGUuc2V0KC13aWR0aCAtIGdhcCAqIGxlbmd0aCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChHbGlkZS5pc1R5cGUoJ2Nhcm91c2VsJykgJiYgQ29tcG9uZW50cy5SdW4uaXNPZmZzZXQoJz4nKSkge1xyXG4gICAgICAgIENvbXBvbmVudHMuVHJhbnNpdGlvbi5hZnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBFdmVudHMuZW1pdCgndHJhbnNsYXRlLmp1bXAnKTtcclxuXHJcbiAgICAgICAgICBUcmFuc2xhdGUuc2V0KDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gVHJhbnNsYXRlLnNldCh3aWR0aCAqIGxlbmd0aCArIGdhcCAqIGxlbmd0aCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBUcmFuc2xhdGUuc2V0KGNvbnRleHQubW92ZW1lbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgdHJhbnNsYXRlOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nIHRvIGJyaW5nIG1hcmt1cCB0byBpdHMgaW5pdGFsIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbignZGVzdHJveScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgVHJhbnNsYXRlLnJlbW92ZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFRyYW5zbGF0ZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIFRyYW5zaXRpb24gKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogSG9sZHMgaW5hY3Rpdml0eSBzdGF0dXMgb2YgdHJhbnNpdGlvbi5cclxuICAgICAqIFdoZW4gdHJ1ZSB0cmFuc2l0aW9uIGlzIG5vdCBhcHBsaWVkLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICB2YXIgZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICB2YXIgVHJhbnNpdGlvbiA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIENvbXBvc2VzIHN0cmluZyBvZiB0aGUgQ1NTIHRyYW5zaXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wZXJ0eVxyXG4gICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgICAqL1xyXG4gICAgICBjb21wb3NlOiBmdW5jdGlvbiBjb21wb3NlKHByb3BlcnR5KSB7XHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0gR2xpZGUuc2V0dGluZ3M7XHJcblxyXG4gICAgICAgIGlmICghZGlzYWJsZWQpIHtcclxuICAgICAgICAgIHJldHVybiBwcm9wZXJ0eSArICcgJyArIHRoaXMuZHVyYXRpb24gKyAnbXMgJyArIHNldHRpbmdzLmFuaW1hdGlvblRpbWluZ0Z1bmM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHJvcGVydHkgKyAnIDBtcyAnICsgc2V0dGluZ3MuYW5pbWF0aW9uVGltaW5nRnVuYztcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyB2YWx1ZSBvZiB0cmFuc2l0aW9uIG9uIEhUTUwgZWxlbWVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtTdHJpbmc9fSBwcm9wZXJ0eVxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoKSB7XHJcbiAgICAgICAgdmFyIHByb3BlcnR5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAndHJhbnNmb3JtJztcclxuXHJcbiAgICAgICAgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIuc3R5bGUudHJhbnNpdGlvbiA9IHRoaXMuY29tcG9zZShwcm9wZXJ0eSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZXMgdmFsdWUgb2YgdHJhbnNpdGlvbiBmcm9tIEhUTUwgZWxlbWVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xyXG4gICAgICAgIENvbXBvbmVudHMuSHRtbC53cmFwcGVyLnN0eWxlLnRyYW5zaXRpb24gPSAnJztcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogUnVucyBjYWxsYmFjayBhZnRlciBhbmltYXRpb24uXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFja1xyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYWZ0ZXI6IGZ1bmN0aW9uIGFmdGVyKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgIH0sIHRoaXMuZHVyYXRpb24pO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBFbmFibGUgdHJhbnNpdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkge1xyXG4gICAgICAgIGRpc2FibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0KCk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERpc2FibGUgdHJhbnNpdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XHJcbiAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICB0aGlzLnNldCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGRlZmluZShUcmFuc2l0aW9uLCAnZHVyYXRpb24nLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGR1cmF0aW9uIG9mIHRoZSB0cmFuc2l0aW9uIGJhc2VkXHJcbiAgICAgICAqIG9uIGN1cnJlbnRseSBydW5uaW5nIGFuaW1hdGlvbiB0eXBlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSBHbGlkZS5zZXR0aW5ncztcclxuXHJcbiAgICAgICAgaWYgKEdsaWRlLmlzVHlwZSgnc2xpZGVyJykgJiYgQ29tcG9uZW50cy5SdW4ub2Zmc2V0KSB7XHJcbiAgICAgICAgICByZXR1cm4gc2V0dGluZ3MucmV3aW5kRHVyYXRpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2V0dGluZ3MuYW5pbWF0aW9uRHVyYXRpb247XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRyYW5zaXRpb24gYHN0eWxlYCB2YWx1ZTpcclxuICAgICAqIC0gb24gZWFjaCBtb3ZpbmcsIGJlY2F1c2UgaXQgbWF5IGJlIGNsZWFyZWQgYnkgb2Zmc2V0IG1vdmVcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdtb3ZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBUcmFuc2l0aW9uLnNldCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNhYmxlIHRyYW5zaXRpb246XHJcbiAgICAgKiAtIGJlZm9yZSBpbml0aWFsIGJ1aWxkIHRvIGF2b2lkIHRyYW5zaXRpb25pbmcgZnJvbSBgMGAgdG8gYHN0YXJ0QXRgIGluZGV4XHJcbiAgICAgKiAtIHdoaWxlIHJlc2l6aW5nIHdpbmRvdyBhbmQgcmVjYWxjdWxhdGluZyBkaW1lbnRpb25zXHJcbiAgICAgKiAtIG9uIGp1bXBpbmcgZnJvbSBvZmZzZXQgdHJhbnNpdGlvbiBhdCBzdGFydCBhbmQgZW5kIGVkZ2VzIGluIGBjYXJvdXNlbGAgdHlwZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydidWlsZC5iZWZvcmUnLCAncmVzaXplJywgJ3RyYW5zbGF0ZS5qdW1wJ10sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgVHJhbnNpdGlvbi5kaXNhYmxlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEVuYWJsZSB0cmFuc2l0aW9uOlxyXG4gICAgICogLSBvbiBlYWNoIHJ1bm5pbmcsIGJlY2F1c2UgaXQgbWF5IGJlIGRpc2FibGVkIGJ5IG9mZnNldCBtb3ZlXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbigncnVuJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBUcmFuc2l0aW9uLmVuYWJsZSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgdHJhbnNpdGlvbjpcclxuICAgICAqIC0gb24gZGVzdHJveWluZyB0byBicmluZyBtYXJrdXAgdG8gaXRzIGluaXRhbCBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIFRyYW5zaXRpb24ucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gVHJhbnNpdGlvbjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRlc3QgdmlhIGEgZ2V0dGVyIGluIHRoZSBvcHRpb25zIG9iamVjdCB0byBzZWVcclxuICAgKiBpZiB0aGUgcGFzc2l2ZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC5cclxuICAgKlxyXG4gICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL1dJQ0cvRXZlbnRMaXN0ZW5lck9wdGlvbnMvYmxvYi9naC1wYWdlcy9leHBsYWluZXIubWQjZmVhdHVyZS1kZXRlY3Rpb25cclxuICAgKi9cclxuXHJcbiAgdmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xyXG5cclxuICB0cnkge1xyXG4gICAgdmFyIG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICBzdXBwb3J0c1Bhc3NpdmUgPSB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdFBhc3NpdmUnLCBudWxsLCBvcHRzKTtcclxuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0UGFzc2l2ZScsIG51bGwsIG9wdHMpO1xyXG4gIH0gY2F0Y2ggKGUpIHt9XHJcblxyXG4gIHZhciBzdXBwb3J0c1Bhc3NpdmUkMSA9IHN1cHBvcnRzUGFzc2l2ZTtcclxuXHJcbiAgdmFyIFNUQVJUX0VWRU5UUyA9IFsndG91Y2hzdGFydCcsICdtb3VzZWRvd24nXTtcclxuICB2YXIgTU9WRV9FVkVOVFMgPSBbJ3RvdWNobW92ZScsICdtb3VzZW1vdmUnXTtcclxuICB2YXIgRU5EX0VWRU5UUyA9IFsndG91Y2hlbmQnLCAndG91Y2hjYW5jZWwnLCAnbW91c2V1cCcsICdtb3VzZWxlYXZlJ107XHJcbiAgdmFyIE1PVVNFX0VWRU5UUyA9IFsnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdtb3VzZXVwJywgJ21vdXNlbGVhdmUnXTtcclxuXHJcbiAgZnVuY3Rpb24gU3dpcGUgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2YgdGhlIGJpbmRlciBmb3IgRE9NIEV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRzQmluZGVyfVxyXG4gICAgICovXHJcbiAgICB2YXIgQmluZGVyID0gbmV3IEV2ZW50c0JpbmRlcigpO1xyXG5cclxuICAgIHZhciBzd2lwZVNpbiA9IDA7XHJcbiAgICB2YXIgc3dpcGVTdGFydFggPSAwO1xyXG4gICAgdmFyIHN3aXBlU3RhcnRZID0gMDtcclxuICAgIHZhciBkaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgdmFyIGNhcHR1cmUgPSBzdXBwb3J0c1Bhc3NpdmUkMSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDogZmFsc2U7XHJcblxyXG4gICAgdmFyIFN3aXBlID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogSW5pdGlhbGl6ZXMgc3dpcGUgYmluZGluZ3MuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5iaW5kU3dpcGVTdGFydCgpO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBIYW5kbGVyIGZvciBgc3dpcGVzdGFydGAgZXZlbnQuIENhbGN1bGF0ZXMgZW50cnkgcG9pbnRzIG9mIHRoZSB1c2VyJ3MgdGFwLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChldmVudCkge1xyXG4gICAgICAgIGlmICghZGlzYWJsZWQgJiYgIUdsaWRlLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICB0aGlzLmRpc2FibGUoKTtcclxuXHJcbiAgICAgICAgICB2YXIgc3dpcGUgPSB0aGlzLnRvdWNoZXMoZXZlbnQpO1xyXG5cclxuICAgICAgICAgIHN3aXBlU2luID0gbnVsbDtcclxuICAgICAgICAgIHN3aXBlU3RhcnRYID0gdG9JbnQoc3dpcGUucGFnZVgpO1xyXG4gICAgICAgICAgc3dpcGVTdGFydFkgPSB0b0ludChzd2lwZS5wYWdlWSk7XHJcblxyXG4gICAgICAgICAgdGhpcy5iaW5kU3dpcGVNb3ZlKCk7XHJcbiAgICAgICAgICB0aGlzLmJpbmRTd2lwZUVuZCgpO1xyXG5cclxuICAgICAgICAgIEV2ZW50cy5lbWl0KCdzd2lwZS5zdGFydCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogSGFuZGxlciBmb3IgYHN3aXBlbW92ZWAgZXZlbnQuIENhbGN1bGF0ZXMgdXNlcidzIHRhcCBhbmdsZSBhbmQgZGlzdGFuY2UuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxyXG4gICAgICAgKi9cclxuICAgICAgbW92ZTogZnVuY3Rpb24gbW92ZShldmVudCkge1xyXG4gICAgICAgIGlmICghR2xpZGUuZGlzYWJsZWQpIHtcclxuICAgICAgICAgIHZhciBfR2xpZGUkc2V0dGluZ3MgPSBHbGlkZS5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICB0b3VjaEFuZ2xlID0gX0dsaWRlJHNldHRpbmdzLnRvdWNoQW5nbGUsXHJcbiAgICAgICAgICAgICAgdG91Y2hSYXRpbyA9IF9HbGlkZSRzZXR0aW5ncy50b3VjaFJhdGlvLFxyXG4gICAgICAgICAgICAgIGNsYXNzZXMgPSBfR2xpZGUkc2V0dGluZ3MuY2xhc3NlcztcclxuXHJcblxyXG4gICAgICAgICAgdmFyIHN3aXBlID0gdGhpcy50b3VjaGVzKGV2ZW50KTtcclxuXHJcbiAgICAgICAgICB2YXIgc3ViRXhTeCA9IHRvSW50KHN3aXBlLnBhZ2VYKSAtIHN3aXBlU3RhcnRYO1xyXG4gICAgICAgICAgdmFyIHN1YkV5U3kgPSB0b0ludChzd2lwZS5wYWdlWSkgLSBzd2lwZVN0YXJ0WTtcclxuICAgICAgICAgIHZhciBwb3dFWCA9IE1hdGguYWJzKHN1YkV4U3ggPDwgMik7XHJcbiAgICAgICAgICB2YXIgcG93RVkgPSBNYXRoLmFicyhzdWJFeVN5IDw8IDIpO1xyXG4gICAgICAgICAgdmFyIHN3aXBlSHlwb3RlbnVzZSA9IE1hdGguc3FydChwb3dFWCArIHBvd0VZKTtcclxuICAgICAgICAgIHZhciBzd2lwZUNhdGhldHVzID0gTWF0aC5zcXJ0KHBvd0VZKTtcclxuXHJcbiAgICAgICAgICBzd2lwZVNpbiA9IE1hdGguYXNpbihzd2lwZUNhdGhldHVzIC8gc3dpcGVIeXBvdGVudXNlKTtcclxuXHJcbiAgICAgICAgICBpZiAoc3dpcGVTaW4gKiAxODAgLyBNYXRoLlBJIDwgdG91Y2hBbmdsZSkge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIENvbXBvbmVudHMuTW92ZS5tYWtlKHN1YkV4U3ggKiB0b0Zsb2F0KHRvdWNoUmF0aW8pKTtcclxuXHJcbiAgICAgICAgICAgIENvbXBvbmVudHMuSHRtbC5yb290LmNsYXNzTGlzdC5hZGQoY2xhc3Nlcy5kcmFnZ2luZyk7XHJcblxyXG4gICAgICAgICAgICBFdmVudHMuZW1pdCgnc3dpcGUubW92ZScpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogSGFuZGxlciBmb3IgYHN3aXBlZW5kYCBldmVudC4gRmluaXRpYWxpemVzIHVzZXIncyB0YXAgYW5kIGRlY2lkZXMgYWJvdXQgZ2xpZGUgbW92ZS5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGV2ZW50XHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBlbmQ6IGZ1bmN0aW9uIGVuZChldmVudCkge1xyXG4gICAgICAgIGlmICghR2xpZGUuZGlzYWJsZWQpIHtcclxuICAgICAgICAgIHZhciBzZXR0aW5ncyA9IEdsaWRlLnNldHRpbmdzO1xyXG5cclxuICAgICAgICAgIHZhciBzd2lwZSA9IHRoaXMudG91Y2hlcyhldmVudCk7XHJcbiAgICAgICAgICB2YXIgdGhyZXNob2xkID0gdGhpcy50aHJlc2hvbGQoZXZlbnQpO1xyXG5cclxuICAgICAgICAgIHZhciBzd2lwZURpc3RhbmNlID0gc3dpcGUucGFnZVggLSBzd2lwZVN0YXJ0WDtcclxuICAgICAgICAgIHZhciBzd2lwZURlZyA9IHN3aXBlU2luICogMTgwIC8gTWF0aC5QSTtcclxuICAgICAgICAgIHZhciBzdGVwcyA9IE1hdGgucm91bmQoc3dpcGVEaXN0YW5jZSAvIENvbXBvbmVudHMuU2l6ZXMuc2xpZGVXaWR0aCk7XHJcblxyXG4gICAgICAgICAgdGhpcy5lbmFibGUoKTtcclxuXHJcbiAgICAgICAgICBpZiAoc3dpcGVEaXN0YW5jZSA+IHRocmVzaG9sZCAmJiBzd2lwZURlZyA8IHNldHRpbmdzLnRvdWNoQW5nbGUpIHtcclxuICAgICAgICAgICAgLy8gV2hpbGUgc3dpcGUgaXMgcG9zaXRpdmUgYW5kIGdyZWF0ZXIgdGhhbiB0aHJlc2hvbGQgbW92ZSBiYWNrd2FyZC5cclxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnBlclRvdWNoKSB7XHJcbiAgICAgICAgICAgICAgc3RlcHMgPSBNYXRoLm1pbihzdGVwcywgdG9JbnQoc2V0dGluZ3MucGVyVG91Y2gpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKENvbXBvbmVudHMuRGlyZWN0aW9uLmlzKCdydGwnKSkge1xyXG4gICAgICAgICAgICAgIHN0ZXBzID0gLXN0ZXBzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBDb21wb25lbnRzLlJ1bi5tYWtlKENvbXBvbmVudHMuRGlyZWN0aW9uLnJlc29sdmUoJzwnICsgc3RlcHMpKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAoc3dpcGVEaXN0YW5jZSA8IC10aHJlc2hvbGQgJiYgc3dpcGVEZWcgPCBzZXR0aW5ncy50b3VjaEFuZ2xlKSB7XHJcbiAgICAgICAgICAgIC8vIFdoaWxlIHN3aXBlIGlzIG5lZ2F0aXZlIGFuZCBsb3dlciB0aGFuIG5lZ2F0aXZlIHRocmVzaG9sZCBtb3ZlIGZvcndhcmQuXHJcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5wZXJUb3VjaCkge1xyXG4gICAgICAgICAgICAgIHN0ZXBzID0gTWF0aC5tYXgoc3RlcHMsIC10b0ludChzZXR0aW5ncy5wZXJUb3VjaCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoQ29tcG9uZW50cy5EaXJlY3Rpb24uaXMoJ3J0bCcpKSB7XHJcbiAgICAgICAgICAgICAgc3RlcHMgPSAtc3RlcHM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENvbXBvbmVudHMuUnVuLm1ha2UoQ29tcG9uZW50cy5EaXJlY3Rpb24ucmVzb2x2ZSgnPicgKyBzdGVwcykpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gV2hpbGUgc3dpcGUgZG9uJ3QgcmVhY2ggZGlzdGFuY2UgYXBwbHkgcHJldmlvdXMgdHJhbnNmb3JtLlxyXG4gICAgICAgICAgICBDb21wb25lbnRzLk1vdmUubWFrZSgpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIENvbXBvbmVudHMuSHRtbC5yb290LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuY2xhc3Nlcy5kcmFnZ2luZyk7XHJcblxyXG4gICAgICAgICAgdGhpcy51bmJpbmRTd2lwZU1vdmUoKTtcclxuICAgICAgICAgIHRoaXMudW5iaW5kU3dpcGVFbmQoKTtcclxuXHJcbiAgICAgICAgICBFdmVudHMuZW1pdCgnc3dpcGUuZW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCaW5kcyBzd2lwZSdzIHN0YXJ0aW5nIGV2ZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYmluZFN3aXBlU3RhcnQ6IGZ1bmN0aW9uIGJpbmRTd2lwZVN0YXJ0KCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IEdsaWRlLnNldHRpbmdzO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQpIHtcclxuICAgICAgICAgIEJpbmRlci5vbihTVEFSVF9FVkVOVFNbMF0sIENvbXBvbmVudHMuSHRtbC53cmFwcGVyLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuc3RhcnQoZXZlbnQpO1xyXG4gICAgICAgICAgfSwgY2FwdHVyZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MuZHJhZ1RocmVzaG9sZCkge1xyXG4gICAgICAgICAgQmluZGVyLm9uKFNUQVJUX0VWRU5UU1sxXSwgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zdGFydChldmVudCk7XHJcbiAgICAgICAgICB9LCBjYXB0dXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuYmluZHMgc3dpcGUncyBzdGFydGluZyBldmVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHVuYmluZFN3aXBlU3RhcnQ6IGZ1bmN0aW9uIHVuYmluZFN3aXBlU3RhcnQoKSB7XHJcbiAgICAgICAgQmluZGVyLm9mZihTVEFSVF9FVkVOVFNbMF0sIENvbXBvbmVudHMuSHRtbC53cmFwcGVyLCBjYXB0dXJlKTtcclxuICAgICAgICBCaW5kZXIub2ZmKFNUQVJUX0VWRU5UU1sxXSwgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIsIGNhcHR1cmUpO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCaW5kcyBzd2lwZSdzIG1vdmluZyBldmVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGJpbmRTd2lwZU1vdmU6IGZ1bmN0aW9uIGJpbmRTd2lwZU1vdmUoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XHJcblxyXG4gICAgICAgIEJpbmRlci5vbihNT1ZFX0VWRU5UUywgQ29tcG9uZW50cy5IdG1sLndyYXBwZXIsIHRocm90dGxlKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgX3RoaXMyLm1vdmUoZXZlbnQpO1xyXG4gICAgICAgIH0sIEdsaWRlLnNldHRpbmdzLnRocm90dGxlKSwgY2FwdHVyZSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuYmluZHMgc3dpcGUncyBtb3ZpbmcgZXZlbnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICB1bmJpbmRTd2lwZU1vdmU6IGZ1bmN0aW9uIHVuYmluZFN3aXBlTW92ZSgpIHtcclxuICAgICAgICBCaW5kZXIub2ZmKE1PVkVfRVZFTlRTLCBDb21wb25lbnRzLkh0bWwud3JhcHBlciwgY2FwdHVyZSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEJpbmRzIHN3aXBlJ3MgZW5kaW5nIGV2ZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYmluZFN3aXBlRW5kOiBmdW5jdGlvbiBiaW5kU3dpcGVFbmQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XHJcblxyXG4gICAgICAgIEJpbmRlci5vbihFTkRfRVZFTlRTLCBDb21wb25lbnRzLkh0bWwud3JhcHBlciwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICBfdGhpczMuZW5kKGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVW5iaW5kcyBzd2lwZSdzIGVuZGluZyBldmVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHVuYmluZFN3aXBlRW5kOiBmdW5jdGlvbiB1bmJpbmRTd2lwZUVuZCgpIHtcclxuICAgICAgICBCaW5kZXIub2ZmKEVORF9FVkVOVFMsIENvbXBvbmVudHMuSHRtbC53cmFwcGVyKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogTm9ybWFsaXplcyBldmVudCB0b3VjaGVzIHBvaW50cyBhY2NvcnRpbmcgdG8gZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcclxuICAgICAgICovXHJcbiAgICAgIHRvdWNoZXM6IGZ1bmN0aW9uIHRvdWNoZXMoZXZlbnQpIHtcclxuICAgICAgICBpZiAoTU9VU0VfRVZFTlRTLmluZGV4T2YoZXZlbnQudHlwZSkgPiAtMSkge1xyXG4gICAgICAgICAgcmV0dXJuIGV2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGV2ZW50LnRvdWNoZXNbMF0gfHwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgdmFsdWUgb2YgbWluaW11bSBzd2lwZSBkaXN0YW5jZSBzZXR0aW5ncyBiYXNlZCBvbiBldmVudCB0eXBlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICB0aHJlc2hvbGQ6IGZ1bmN0aW9uIHRocmVzaG9sZChldmVudCkge1xyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IEdsaWRlLnNldHRpbmdzO1xyXG5cclxuICAgICAgICBpZiAoTU9VU0VfRVZFTlRTLmluZGV4T2YoZXZlbnQudHlwZSkgPiAtMSkge1xyXG4gICAgICAgICAgcmV0dXJuIHNldHRpbmdzLmRyYWdUaHJlc2hvbGQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc2V0dGluZ3Muc3dpcGVUaHJlc2hvbGQ7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEVuYWJsZXMgc3dpcGUgZXZlbnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge3NlbGZ9XHJcbiAgICAgICAqL1xyXG4gICAgICBlbmFibGU6IGZ1bmN0aW9uIGVuYWJsZSgpIHtcclxuICAgICAgICBkaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBDb21wb25lbnRzLlRyYW5zaXRpb24uZW5hYmxlKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBEaXNhYmxlcyBzd2lwZSBldmVudC5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7c2VsZn1cclxuICAgICAgICovXHJcbiAgICAgIGRpc2FibGU6IGZ1bmN0aW9uIGRpc2FibGUoKSB7XHJcbiAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICBDb21wb25lbnRzLlRyYW5zaXRpb24uZGlzYWJsZSgpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBjb21wb25lbnQgY2xhc3M6XHJcbiAgICAgKiAtIGFmdGVyIGluaXRpYWwgYnVpbGRpbmdcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdidWlsZC5hZnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgQ29tcG9uZW50cy5IdG1sLnJvb3QuY2xhc3NMaXN0LmFkZChHbGlkZS5zZXR0aW5ncy5jbGFzc2VzLnN3aXBlYWJsZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBzd2lwaW5nIGJpbmRpbmdzOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nLCB0byByZW1vdmUgYWRkZWQgRXZlbnRMaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBTd2lwZS51bmJpbmRTd2lwZVN0YXJ0KCk7XHJcbiAgICAgIFN3aXBlLnVuYmluZFN3aXBlTW92ZSgpO1xyXG4gICAgICBTd2lwZS51bmJpbmRTd2lwZUVuZCgpO1xyXG4gICAgICBCaW5kZXIuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIFN3aXBlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gSW1hZ2VzIChHbGlkZSwgQ29tcG9uZW50cywgRXZlbnRzKSB7XHJcbiAgICAvKipcclxuICAgICAqIEluc3RhbmNlIG9mIHRoZSBiaW5kZXIgZm9yIERPTSBFdmVudHMuXHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge0V2ZW50c0JpbmRlcn1cclxuICAgICAqL1xyXG4gICAgdmFyIEJpbmRlciA9IG5ldyBFdmVudHNCaW5kZXIoKTtcclxuXHJcbiAgICB2YXIgSW1hZ2VzID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogQmluZHMgbGlzdGVuZXIgdG8gZ2xpZGUgd3JhcHBlci5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICB0aGlzLmJpbmQoKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQmluZHMgYGRyYWdzdGFydGAgZXZlbnQgb24gd3JhcHBlciB0byBwcmV2ZW50IGRyYWdnaW5nIGltYWdlcy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XHJcbiAgICAgICAgQmluZGVyLm9uKCdkcmFnc3RhcnQnLCBDb21wb25lbnRzLkh0bWwud3JhcHBlciwgdGhpcy5kcmFnc3RhcnQpO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBVbmJpbmRzIGBkcmFnc3RhcnRgIGV2ZW50IG9uIHdyYXBwZXIuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICBCaW5kZXIub2ZmKCdkcmFnc3RhcnQnLCBDb21wb25lbnRzLkh0bWwud3JhcHBlcik7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEV2ZW50IGhhbmRsZXIuIFByZXZlbnRzIGRyYWdnaW5nLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgZHJhZ3N0YXJ0OiBmdW5jdGlvbiBkcmFnc3RhcnQoZXZlbnQpIHtcclxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGJpbmRpbmdzIGZyb20gaW1hZ2VzOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nLCB0byByZW1vdmUgYWRkZWQgRXZlbnRMaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBJbWFnZXMudW5iaW5kKCk7XHJcbiAgICAgIEJpbmRlci5kZXN0cm95KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gSW1hZ2VzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gQW5jaG9ycyAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW5jZSBvZiB0aGUgYmluZGVyIGZvciBET00gRXZlbnRzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtFdmVudHNCaW5kZXJ9XHJcbiAgICAgKi9cclxuICAgIHZhciBCaW5kZXIgPSBuZXcgRXZlbnRzQmluZGVyKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIb2xkcyBkZXRhY2hpbmcgc3RhdHVzIG9mIGFuY2hvcnMuXHJcbiAgICAgKiBQcmV2ZW50cyBkZXRhY2hpbmcgb2YgYWxyZWFkeSBkZXRhY2hlZCBhbmNob3JzLlxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgdmFyIGRldGFjaGVkID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIb2xkcyBwcmV2ZW50aW5nIHN0YXR1cyBvZiBhbmNob3JzLlxyXG4gICAgICogSWYgYHRydWVgIHJlZGlyZWN0aW9uIGFmdGVyIGNsaWNrIHdpbGwgYmUgZGlzYWJsZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICovXHJcbiAgICB2YXIgcHJldmVudGVkID0gZmFsc2U7XHJcblxyXG4gICAgdmFyIEFuY2hvcnMgPSB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBTZXR1cHMgYSBpbml0aWFsIHN0YXRlIG9mIGFuY2hvcnMgY29tcG9uZW50LlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJucyB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyBjb2xsZWN0aW9uIG9mIGFuY2hvcnMgZWxlbWVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ29sbGVjdGlvbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9hID0gQ29tcG9uZW50cy5IdG1sLndyYXBwZXIucXVlcnlTZWxlY3RvckFsbCgnYScpO1xyXG5cclxuICAgICAgICB0aGlzLmJpbmQoKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogQmluZHMgZXZlbnRzIHRvIGFuY2hvcnMgaW5zaWRlIGEgdHJhY2suXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xyXG4gICAgICAgIEJpbmRlci5vbignY2xpY2snLCBDb21wb25lbnRzLkh0bWwud3JhcHBlciwgdGhpcy5jbGljayk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuYmluZHMgZXZlbnRzIGF0dGFjaGVkIHRvIGFuY2hvcnMgaW5zaWRlIGEgdHJhY2suXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcclxuICAgICAgICBCaW5kZXIub2ZmKCdjbGljaycsIENvbXBvbmVudHMuSHRtbC53cmFwcGVyKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogSGFuZGxlciBmb3IgY2xpY2sgZXZlbnQuIFByZXZlbnRzIGNsaWNrcyB3aGVuIGdsaWRlIGlzIGluIGBwcmV2ZW50YCBzdGF0dXMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSAge09iamVjdH0gZXZlbnRcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljayhldmVudCkge1xyXG4gICAgICAgIGlmIChwcmV2ZW50ZWQpIHtcclxuICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIERldGFjaGVzIGFuY2hvcnMgY2xpY2sgZXZlbnQgaW5zaWRlIGdsaWRlLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtzZWxmfVxyXG4gICAgICAgKi9cclxuICAgICAgZGV0YWNoOiBmdW5jdGlvbiBkZXRhY2goKSB7XHJcbiAgICAgICAgcHJldmVudGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgaWYgKCFkZXRhY2hlZCkge1xyXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXNbaV0uZHJhZ2dhYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLnNldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJywgdGhpcy5pdGVtc1tpXS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLml0ZW1zW2ldLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRldGFjaGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBdHRhY2hlcyBhbmNob3JzIGNsaWNrIGV2ZW50cyBpbnNpZGUgZ2xpZGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge3NlbGZ9XHJcbiAgICAgICAqL1xyXG4gICAgICBhdHRhY2g6IGZ1bmN0aW9uIGF0dGFjaCgpIHtcclxuICAgICAgICBwcmV2ZW50ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKGRldGFjaGVkKSB7XHJcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5kcmFnZ2FibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCB0aGlzLml0ZW1zW2ldLmdldEF0dHJpYnV0ZSgnZGF0YS1ocmVmJykpO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGRldGFjaGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBkZWZpbmUoQW5jaG9ycywgJ2l0ZW1zJywge1xyXG4gICAgICAvKipcclxuICAgICAgICogR2V0cyBjb2xsZWN0aW9uIG9mIHRoZSBhcnJvd3MgSFRNTCBlbGVtZW50cy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7SFRNTEVsZW1lbnRbXX1cclxuICAgICAgICovXHJcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgIHJldHVybiBBbmNob3JzLl9hO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERldGFjaCBhbmNob3JzIGluc2lkZSBzbGlkZXM6XHJcbiAgICAgKiAtIG9uIHN3aXBpbmcsIHNvIHRoZXkgd29uJ3QgcmVkaXJlY3QgdG8gaXRzIGBocmVmYCBhdHRyaWJ1dGVzXHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbignc3dpcGUubW92ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgQW5jaG9ycy5kZXRhY2goKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQXR0YWNoIGFuY2hvcnMgaW5zaWRlIHNsaWRlczpcclxuICAgICAqIC0gYWZ0ZXIgc3dpcGluZyBhbmQgdHJhbnNpdGlvbnMgZW5kcywgc28gdGhleSBjYW4gcmVkaXJlY3QgYWZ0ZXIgY2xpY2sgYWdhaW5cclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdzd2lwZS5lbmQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIENvbXBvbmVudHMuVHJhbnNpdGlvbi5hZnRlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgQW5jaG9ycy5hdHRhY2goKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuYmluZCBhbmNob3JzIGluc2lkZSBzbGlkZXM6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcsIHRvIGJyaW5nIGFuY2hvcnMgdG8gaXRzIGluaXRpYWwgc3RhdGVcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBBbmNob3JzLmF0dGFjaCgpO1xyXG4gICAgICBBbmNob3JzLnVuYmluZCgpO1xyXG4gICAgICBCaW5kZXIuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEFuY2hvcnM7XHJcbiAgfVxyXG5cclxuICB2YXIgTkFWX1NFTEVDVE9SID0gJ1tkYXRhLWdsaWRlLWVsPVwiY29udHJvbHNbbmF2XVwiXSc7XHJcbiAgdmFyIENPTlRST0xTX1NFTEVDVE9SID0gJ1tkYXRhLWdsaWRlLWVsXj1cImNvbnRyb2xzXCJdJztcclxuXHJcbiAgZnVuY3Rpb24gQ29udHJvbHMgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2YgdGhlIGJpbmRlciBmb3IgRE9NIEV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRzQmluZGVyfVxyXG4gICAgICovXHJcbiAgICB2YXIgQmluZGVyID0gbmV3IEV2ZW50c0JpbmRlcigpO1xyXG5cclxuICAgIHZhciBjYXB0dXJlID0gc3VwcG9ydHNQYXNzaXZlJDEgPyB7IHBhc3NpdmU6IHRydWUgfSA6IGZhbHNlO1xyXG5cclxuICAgIHZhciBDb250cm9scyA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEluaXRzIGFycm93cy4gQmluZHMgZXZlbnRzIGxpc3RlbmVyc1xyXG4gICAgICAgKiB0byB0aGUgYXJyb3dzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29sbGVjdGlvbiBvZiBuYXZpZ2F0aW9uIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ29sbGVjdGlvbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9uID0gQ29tcG9uZW50cy5IdG1sLnJvb3QucXVlcnlTZWxlY3RvckFsbChOQVZfU0VMRUNUT1IpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIGNvbnRyb2xzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEB0eXBlIHtIVE1MQ29sbGVjdGlvbn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9jID0gQ29tcG9uZW50cy5IdG1sLnJvb3QucXVlcnlTZWxlY3RvckFsbChDT05UUk9MU19TRUxFQ1RPUik7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQmluZGluZ3MoKTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogU2V0cyBhY3RpdmUgY2xhc3MgdG8gY3VycmVudCBzbGlkZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHNldEFjdGl2ZTogZnVuY3Rpb24gc2V0QWN0aXZlKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy5hZGRDbGFzcyh0aGlzLl9uW2ldLmNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZXMgYWN0aXZlIGNsYXNzIHRvIGN1cnJlbnQgc2xpZGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICByZW1vdmVBY3RpdmU6IGZ1bmN0aW9uIHJlbW92ZUFjdGl2ZSgpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHRoaXMucmVtb3ZlQ2xhc3ModGhpcy5fbltpXS5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBUb2dnbGVzIGFjdGl2ZSBjbGFzcyBvbiBpdGVtcyBpbnNpZGUgbmF2aWdhdGlvbi5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7SFRNTEVsZW1lbnR9IGNvbnRyb2xzXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBhZGRDbGFzczogZnVuY3Rpb24gYWRkQ2xhc3MoY29udHJvbHMpIHtcclxuICAgICAgICB2YXIgc2V0dGluZ3MgPSBHbGlkZS5zZXR0aW5ncztcclxuICAgICAgICB2YXIgaXRlbSA9IGNvbnRyb2xzW0dsaWRlLmluZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5jbGFzc2VzLmFjdGl2ZU5hdik7XHJcblxyXG4gICAgICAgICAgc2libGluZ3MoaXRlbSkuZm9yRWFjaChmdW5jdGlvbiAoc2libGluZykge1xyXG4gICAgICAgICAgICBzaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuY2xhc3Nlcy5hY3RpdmVOYXYpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZW1vdmVzIGFjdGl2ZSBjbGFzcyBmcm9tIGFjdGl2ZSBjb250cm9sLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gY29udHJvbHNcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiByZW1vdmVDbGFzcyhjb250cm9scykge1xyXG4gICAgICAgIHZhciBpdGVtID0gY29udHJvbHNbR2xpZGUuaW5kZXhdO1xyXG5cclxuICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKEdsaWRlLnNldHRpbmdzLmNsYXNzZXMuYWN0aXZlTmF2KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEFkZHMgaGFuZGxlcyB0byB0aGUgZWFjaCBncm91cCBvZiBjb250cm9scy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIGFkZEJpbmRpbmdzOiBmdW5jdGlvbiBhZGRCaW5kaW5ncygpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIHRoaXMuYmluZCh0aGlzLl9jW2ldLmNoaWxkcmVuKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFJlbW92ZXMgaGFuZGxlcyBmcm9tIHRoZSBlYWNoIGdyb3VwIG9mIGNvbnRyb2xzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgcmVtb3ZlQmluZGluZ3M6IGZ1bmN0aW9uIHJlbW92ZUJpbmRpbmdzKCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fYy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdGhpcy51bmJpbmQodGhpcy5fY1tpXS5jaGlsZHJlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBCaW5kcyBldmVudHMgdG8gYXJyb3dzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7SFRNTENvbGxlY3Rpb259IGVsZW1lbnRzXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKGVsZW1lbnRzKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgQmluZGVyLm9uKCdjbGljaycsIGVsZW1lbnRzW2ldLCB0aGlzLmNsaWNrKTtcclxuICAgICAgICAgIEJpbmRlci5vbigndG91Y2hzdGFydCcsIGVsZW1lbnRzW2ldLCB0aGlzLmNsaWNrLCBjYXB0dXJlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFVuYmluZHMgZXZlbnRzIGJpbmRlZCB0byB0aGUgYXJyb3dzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7SFRNTENvbGxlY3Rpb259IGVsZW1lbnRzXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbGVtZW50cykge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgIEJpbmRlci5vZmYoWydjbGljaycsICd0b3VjaHN0YXJ0J10sIGVsZW1lbnRzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEhhbmRsZXMgYGNsaWNrYCBldmVudCBvbiB0aGUgYXJyb3dzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqIE1vdmVzIHNsaWRlciBpbiBkcmllY3Rpb24gcHJlY2lzZWQgaW5cclxuICAgICAgICogYGRhdGEtZ2xpZGUtZGlyYCBhdHRyaWJ1dGUuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgQ29tcG9uZW50cy5SdW4ubWFrZShDb21wb25lbnRzLkRpcmVjdGlvbi5yZXNvbHZlKGV2ZW50LmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWdsaWRlLWRpcicpKSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZGVmaW5lKENvbnRyb2xzLCAnaXRlbXMnLCB7XHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBHZXRzIGNvbGxlY3Rpb24gb2YgdGhlIGNvbnRyb2xzIEhUTUwgZWxlbWVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50W119XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICByZXR1cm4gQ29udHJvbHMuX2M7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3dhcCBhY3RpdmUgY2xhc3Mgb2YgY3VycmVudCBuYXZpZ2F0aW9uIGl0ZW06XHJcbiAgICAgKiAtIGFmdGVyIG1vdW50aW5nIHRvIHNldCBpdCB0byBpbml0aWFsIGluZGV4XHJcbiAgICAgKiAtIGFmdGVyIGVhY2ggbW92ZSB0byB0aGUgbmV3IGluZGV4XHJcbiAgICAgKi9cclxuICAgIEV2ZW50cy5vbihbJ21vdW50LmFmdGVyJywgJ21vdmUuYWZ0ZXInXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBDb250cm9scy5zZXRBY3RpdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGJpbmRpbmdzIGFuZCBIVE1MIENsYXNzZXM6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcsIHRvIGJyaW5nIG1hcmt1cCB0byBpdHMgaW5pdGlhbCBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIENvbnRyb2xzLnJlbW92ZUJpbmRpbmdzKCk7XHJcbiAgICAgIENvbnRyb2xzLnJlbW92ZUFjdGl2ZSgpO1xyXG4gICAgICBCaW5kZXIuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIENvbnRyb2xzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gS2V5Ym9hcmQgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2YgdGhlIGJpbmRlciBmb3IgRE9NIEV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRzQmluZGVyfVxyXG4gICAgICovXHJcbiAgICB2YXIgQmluZGVyID0gbmV3IEV2ZW50c0JpbmRlcigpO1xyXG5cclxuICAgIHZhciBLZXlib2FyZCA9IHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEJpbmRzIGtleWJvYXJkIGV2ZW50cyBvbiBjb21wb25lbnQgbW91bnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBtb3VudDogZnVuY3Rpb24gbW91bnQoKSB7XHJcbiAgICAgICAgaWYgKEdsaWRlLnNldHRpbmdzLmtleWJvYXJkKSB7XHJcbiAgICAgICAgICB0aGlzLmJpbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIEFkZHMga2V5Ym9hcmQgcHJlc3MgZXZlbnRzLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgICBCaW5kZXIub24oJ2tleXVwJywgZG9jdW1lbnQsIHRoaXMucHJlc3MpO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBSZW1vdmVzIGtleWJvYXJkIHByZXNzIGV2ZW50cy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xyXG4gICAgICAgIEJpbmRlci5vZmYoJ2tleXVwJywgZG9jdW1lbnQpO1xyXG4gICAgICB9LFxyXG5cclxuXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBIYW5kbGVzIGtleWJvYXJkJ3MgYXJyb3dzIHByZXNzIGFuZCBtb3ZpbmcgZ2xpZGUgZm93YXJkIGFuZCBiYWNrd2FyZC5cclxuICAgICAgICpcclxuICAgICAgICogQHBhcmFtICB7T2JqZWN0fSBldmVudFxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgcHJlc3M6IGZ1bmN0aW9uIHByZXNzKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IDM5KSB7XHJcbiAgICAgICAgICBDb21wb25lbnRzLlJ1bi5tYWtlKENvbXBvbmVudHMuRGlyZWN0aW9uLnJlc29sdmUoJz4nKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMzcpIHtcclxuICAgICAgICAgIENvbXBvbmVudHMuUnVuLm1ha2UoQ29tcG9uZW50cy5EaXJlY3Rpb24ucmVzb2x2ZSgnPCcpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdmUgYmluZGluZ3MgZnJvbSBrZXlib2FyZDpcclxuICAgICAqIC0gb24gZGVzdHJveWluZyB0byByZW1vdmUgYWRkZWQgZXZlbnRzXHJcbiAgICAgKiAtIG9uIHVwZGF0aW5nIHRvIHJlbW92ZSBldmVudHMgYmVmb3JlIHJlbW91bnRpbmdcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKFsnZGVzdHJveScsICd1cGRhdGUnXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBLZXlib2FyZC51bmJpbmQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3VudCBjb21wb25lbnRcclxuICAgICAqIC0gb24gdXBkYXRpbmcgdG8gcmVmbGVjdCBwb3RlbnRpYWwgY2hhbmdlcyBpbiBzZXR0aW5nc1xyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgS2V5Ym9hcmQubW91bnQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVzdHJveSBiaW5kZXI6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcgdG8gcmVtb3ZlIGxpc3RlbmVyc1xyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEJpbmRlci5kZXN0cm95KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gS2V5Ym9hcmQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBBdXRvcGxheSAoR2xpZGUsIENvbXBvbmVudHMsIEV2ZW50cykge1xyXG4gICAgLyoqXHJcbiAgICAgKiBJbnN0YW5jZSBvZiB0aGUgYmluZGVyIGZvciBET00gRXZlbnRzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtFdmVudHNCaW5kZXJ9XHJcbiAgICAgKi9cclxuICAgIHZhciBCaW5kZXIgPSBuZXcgRXZlbnRzQmluZGVyKCk7XHJcblxyXG4gICAgdmFyIEF1dG9wbGF5ID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogSW5pdGlhbGl6ZXMgYXV0b3BsYXlpbmcgYW5kIGV2ZW50cy5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIG1vdW50OiBmdW5jdGlvbiBtb3VudCgpIHtcclxuICAgICAgICB0aGlzLnN0YXJ0KCk7XHJcblxyXG4gICAgICAgIGlmIChHbGlkZS5zZXR0aW5ncy5ob3ZlcnBhdXNlKSB7XHJcbiAgICAgICAgICB0aGlzLmJpbmQoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFN0YXJ0cyBhdXRvcGxheWluZyBpbiBjb25maWd1cmVkIGludGVydmFsLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcGFyYW0ge0Jvb2xlYW58TnVtYmVyfSBmb3JjZSBSdW4gYXV0b3BsYXlpbmcgd2l0aCBwYXNzZWQgaW50ZXJ2YWwgcmVnYXJkbGVzcyBvZiBgYXV0b3BsYXlgIHNldHRpbmdzXHJcbiAgICAgICAqIEByZXR1cm4ge1ZvaWR9XHJcbiAgICAgICAqL1xyXG4gICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYgKEdsaWRlLnNldHRpbmdzLmF1dG9wbGF5KSB7XHJcbiAgICAgICAgICBpZiAoaXNVbmRlZmluZWQodGhpcy5faSkpIHtcclxuICAgICAgICAgICAgdGhpcy5faSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5zdG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgIENvbXBvbmVudHMuUnVuLm1ha2UoJz4nKTtcclxuXHJcbiAgICAgICAgICAgICAgX3RoaXMuc3RhcnQoKTtcclxuICAgICAgICAgICAgfSwgdGhpcy50aW1lKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFN0b3BzIGF1dG9ydW5uaW5nIG9mIHRoZSBnbGlkZS5cclxuICAgICAgICpcclxuICAgICAgICogQHJldHVybiB7Vm9pZH1cclxuICAgICAgICovXHJcbiAgICAgIHN0b3A6IGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgICAgICAgdGhpcy5faSA9IGNsZWFySW50ZXJ2YWwodGhpcy5faSk7XHJcbiAgICAgIH0sXHJcblxyXG5cclxuICAgICAgLyoqXHJcbiAgICAgICAqIFN0b3BzIGF1dG9wbGF5aW5nIHdoaWxlIG1vdXNlIGlzIG92ZXIgZ2xpZGUncyBhcmVhLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcclxuICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcclxuXHJcbiAgICAgICAgQmluZGVyLm9uKCdtb3VzZW92ZXInLCBDb21wb25lbnRzLkh0bWwucm9vdCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgX3RoaXMyLnN0b3AoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgQmluZGVyLm9uKCdtb3VzZW91dCcsIENvbXBvbmVudHMuSHRtbC5yb290LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBfdGhpczIuc3RhcnQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuXHJcblxyXG4gICAgICAvKipcclxuICAgICAgICogVW5iaW5kIG1vdXNlb3ZlciBldmVudHMuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEByZXR1cm5zIHtWb2lkfVxyXG4gICAgICAgKi9cclxuICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XHJcbiAgICAgICAgQmluZGVyLm9mZihbJ21vdXNlb3ZlcicsICdtb3VzZW91dCddLCBDb21wb25lbnRzLkh0bWwucm9vdCk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZGVmaW5lKEF1dG9wbGF5LCAndGltZScsIHtcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEdldHMgdGltZSBwZXJpb2QgdmFsdWUgZm9yIHRoZSBhdXRvcGxheSBpbnRlcnZhbC4gUHJpb3JpdGl6ZXNcclxuICAgICAgICogdGltZXMgaW4gYGRhdGEtZ2xpZGUtYXV0b3BsYXlgIGF0dHJ1YnV0ZXMgb3ZlciBvcHRpb25zLlxyXG4gICAgICAgKlxyXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XHJcbiAgICAgICAqL1xyXG4gICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcclxuICAgICAgICB2YXIgYXV0b3BsYXkgPSBDb21wb25lbnRzLkh0bWwuc2xpZGVzW0dsaWRlLmluZGV4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZ2xpZGUtYXV0b3BsYXknKTtcclxuXHJcbiAgICAgICAgaWYgKGF1dG9wbGF5KSB7XHJcbiAgICAgICAgICByZXR1cm4gdG9JbnQoYXV0b3BsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRvSW50KEdsaWRlLnNldHRpbmdzLmF1dG9wbGF5KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIGF1dG9wbGF5aW5nIGFuZCB1bmJpbmQgZXZlbnRzOlxyXG4gICAgICogLSBvbiBkZXN0cm95aW5nLCB0byBjbGVhciBkZWZpbmVkIGludGVydmFsXHJcbiAgICAgKiAtIG9uIHVwZGF0aW5nIHZpYSBBUEkgdG8gcmVzZXQgaW50ZXJ2YWwgdGhhdCBtYXkgY2hhbmdlZFxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydkZXN0cm95JywgJ3VwZGF0ZSddLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEF1dG9wbGF5LnVuYmluZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdG9wIGF1dG9wbGF5aW5nOlxyXG4gICAgICogLSBiZWZvcmUgZWFjaCBydW4sIHRvIHJlc3RhcnQgYXV0b3BsYXlpbmdcclxuICAgICAqIC0gb24gcGF1c2luZyB2aWEgQVBJXHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcsIHRvIGNsZWFyIGRlZmluZWQgaW50ZXJ2YWxcclxuICAgICAqIC0gd2hpbGUgc3RhcnRpbmcgYSBzd2lwZVxyXG4gICAgICogLSBvbiB1cGRhdGluZyB2aWEgQVBJIHRvIHJlc2V0IGludGVydmFsIHRoYXQgbWF5IGNoYW5nZWRcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKFsncnVuLmJlZm9yZScsICdwYXVzZScsICdkZXN0cm95JywgJ3N3aXBlLnN0YXJ0JywgJ3VwZGF0ZSddLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEF1dG9wbGF5LnN0b3AoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU3RhcnQgYXV0b3BsYXlpbmc6XHJcbiAgICAgKiAtIGFmdGVyIGVhY2ggcnVuLCB0byByZXN0YXJ0IGF1dG9wbGF5aW5nXHJcbiAgICAgKiAtIG9uIHBsYXlpbmcgdmlhIEFQSVxyXG4gICAgICogLSB3aGlsZSBlbmRpbmcgYSBzd2lwZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oWydydW4uYWZ0ZXInLCAncGxheScsICdzd2lwZS5lbmQnXSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICBBdXRvcGxheS5zdGFydCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW1vdW50IGF1dG9wbGF5aW5nOlxyXG4gICAgICogLSBvbiB1cGRhdGluZyB2aWEgQVBJIHRvIHJlc2V0IGludGVydmFsIHRoYXQgbWF5IGNoYW5nZWRcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCd1cGRhdGUnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEF1dG9wbGF5Lm1vdW50KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlc3Ryb3kgYSBiaW5kZXI6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcgZ2xpZGUgaW5zdGFuY2UgdG8gY2xlYXJ1cCBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgRXZlbnRzLm9uKCdkZXN0cm95JywgZnVuY3Rpb24gKCkge1xyXG4gICAgICBCaW5kZXIuZGVzdHJveSgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIEF1dG9wbGF5O1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU29ydHMga2V5cyBvZiBicmVha3BvaW50IG9iamVjdCBzbyB0aGV5IHdpbGwgYmUgb3JkZXJlZCBmcm9tIGxvd2VyIHRvIGJpZ2dlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwb2ludHNcclxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxyXG4gICAqL1xyXG4gIGZ1bmN0aW9uIHNvcnRCcmVha3BvaW50cyhwb2ludHMpIHtcclxuICAgIGlmIChpc09iamVjdChwb2ludHMpKSB7XHJcbiAgICAgIHJldHVybiBzb3J0S2V5cyhwb2ludHMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgd2FybignQnJlYWtwb2ludHMgb3B0aW9uIG11c3QgYmUgYW4gb2JqZWN0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHt9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gQnJlYWtwb2ludHMgKEdsaWRlLCBDb21wb25lbnRzLCBFdmVudHMpIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5zdGFuY2Ugb2YgdGhlIGJpbmRlciBmb3IgRE9NIEV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7RXZlbnRzQmluZGVyfVxyXG4gICAgICovXHJcbiAgICB2YXIgQmluZGVyID0gbmV3IEV2ZW50c0JpbmRlcigpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSG9sZHMgcmVmZXJlbmNlIHRvIHNldHRpbmdzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHZhciBzZXR0aW5ncyA9IEdsaWRlLnNldHRpbmdzO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSG9sZHMgcmVmZXJlbmNlIHRvIGJyZWFrcG9pbnRzIG9iamVjdCBpbiBzZXR0aW5ncy4gU29ydHMgYnJlYWtwb2ludHNcclxuICAgICAqIGZyb20gc21hbGxlciB0byBsYXJnZXIuIEl0IGlzIHJlcXVpcmVkIGluIG9yZGVyIHRvIHByb3BlclxyXG4gICAgICogbWF0Y2hpbmcgY3VycmVudGx5IGFjdGl2ZSBicmVha3BvaW50IHNldHRpbmdzLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHZhciBwb2ludHMgPSBzb3J0QnJlYWtwb2ludHMoc2V0dGluZ3MuYnJlYWtwb2ludHMpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FjaGUgaW5pdGlhbCBzZXR0aW5ncyBiZWZvcmUgb3ZlcndyaXR0aW5nLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIHZhciBkZWZhdWx0cyA9IF9leHRlbmRzKHt9LCBzZXR0aW5ncyk7XHJcblxyXG4gICAgdmFyIEJyZWFrcG9pbnRzID0ge1xyXG4gICAgICAvKipcclxuICAgICAgICogTWF0Y2hlcyBzZXR0aW5ncyBmb3IgY3VycmVjdGx5IG1hdGNoaW5nIG1lZGlhIGJyZWFrcG9pbnQuXHJcbiAgICAgICAqXHJcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwb2ludHNcclxuICAgICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAgICovXHJcbiAgICAgIG1hdGNoOiBmdW5jdGlvbiBtYXRjaChwb2ludHMpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5tYXRjaE1lZGlhICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgZm9yICh2YXIgcG9pbnQgaW4gcG9pbnRzKSB7XHJcbiAgICAgICAgICAgIGlmIChwb2ludHMuaGFzT3duUHJvcGVydHkocG9pbnQpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKCcobWF4LXdpZHRoOiAnICsgcG9pbnQgKyAncHgpJykubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50c1twb2ludF07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGVmYXVsdHM7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVyd3JpdGUgaW5zdGFuY2Ugc2V0dGluZ3Mgd2l0aCBjdXJyZW50bHkgbWF0Y2hpbmcgYnJlYWtwb2ludCBzZXR0aW5ncy5cclxuICAgICAqIFRoaXMgaGFwcGVucyByaWdodCBhZnRlciBjb21wb25lbnQgaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKi9cclxuICAgIF9leHRlbmRzKHNldHRpbmdzLCBCcmVha3BvaW50cy5tYXRjaChwb2ludHMpKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSBnbGlkZSB3aXRoIHNldHRpbmdzIG9mIG1hdGNoZWQgYnJla3BvaW50OlxyXG4gICAgICogLSB3aW5kb3cgcmVzaXplIHRvIHVwZGF0ZSBzbGlkZXJcclxuICAgICAqL1xyXG4gICAgQmluZGVyLm9uKCdyZXNpemUnLCB3aW5kb3csIHRocm90dGxlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgR2xpZGUuc2V0dGluZ3MgPSBtZXJnZU9wdGlvbnMoc2V0dGluZ3MsIEJyZWFrcG9pbnRzLm1hdGNoKHBvaW50cykpO1xyXG4gICAgfSwgR2xpZGUuc2V0dGluZ3MudGhyb3R0bGUpKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlc29ydCBhbmQgdXBkYXRlIGRlZmF1bHQgc2V0dGluZ3M6XHJcbiAgICAgKiAtIG9uIHJlaW5pdCB2aWEgQVBJLCBzbyBicmVha3BvaW50IG1hdGNoaW5nIHdpbGwgYmUgcGVyZm9ybWVkIHdpdGggb3B0aW9uc1xyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ3VwZGF0ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgcG9pbnRzID0gc29ydEJyZWFrcG9pbnRzKHBvaW50cyk7XHJcblxyXG4gICAgICBkZWZhdWx0cyA9IF9leHRlbmRzKHt9LCBzZXR0aW5ncyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFVuYmluZCByZXNpemUgbGlzdGVuZXI6XHJcbiAgICAgKiAtIG9uIGRlc3Ryb3lpbmcsIHRvIGJyaW5nIG1hcmt1cCB0byBpdHMgaW5pdGlhbCBzdGF0ZVxyXG4gICAgICovXHJcbiAgICBFdmVudHMub24oJ2Rlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIEJpbmRlci5vZmYoJ3Jlc2l6ZScsIHdpbmRvdyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gQnJlYWtwb2ludHM7XHJcbiAgfVxyXG5cclxuICB2YXIgQ09NUE9ORU5UUyA9IHtcclxuICAgIC8vIFJlcXVpcmVkXHJcbiAgICBIdG1sOiBIdG1sLFxyXG4gICAgVHJhbnNsYXRlOiBUcmFuc2xhdGUsXHJcbiAgICBUcmFuc2l0aW9uOiBUcmFuc2l0aW9uLFxyXG4gICAgRGlyZWN0aW9uOiBEaXJlY3Rpb24sXHJcbiAgICBQZWVrOiBQZWVrLFxyXG4gICAgU2l6ZXM6IFNpemVzLFxyXG4gICAgR2FwczogR2FwcyxcclxuICAgIE1vdmU6IE1vdmUsXHJcbiAgICBDbG9uZXM6IENsb25lcyxcclxuICAgIFJlc2l6ZTogUmVzaXplLFxyXG4gICAgQnVpbGQ6IEJ1aWxkLFxyXG4gICAgUnVuOiBSdW4sXHJcblxyXG4gICAgLy8gT3B0aW9uYWxcclxuICAgIFN3aXBlOiBTd2lwZSxcclxuICAgIEltYWdlczogSW1hZ2VzLFxyXG4gICAgQW5jaG9yczogQW5jaG9ycyxcclxuICAgIENvbnRyb2xzOiBDb250cm9scyxcclxuICAgIEtleWJvYXJkOiBLZXlib2FyZCxcclxuICAgIEF1dG9wbGF5OiBBdXRvcGxheSxcclxuICAgIEJyZWFrcG9pbnRzOiBCcmVha3BvaW50c1xyXG4gIH07XHJcblxyXG4gIHZhciBHbGlkZSQxID0gZnVuY3Rpb24gKF9Db3JlKSB7XHJcbiAgICBpbmhlcml0cyhHbGlkZSQkMSwgX0NvcmUpO1xyXG5cclxuICAgIGZ1bmN0aW9uIEdsaWRlJCQxKCkge1xyXG4gICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBHbGlkZSQkMSk7XHJcbiAgICAgIHJldHVybiBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChHbGlkZSQkMS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEdsaWRlJCQxKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2xhc3MoR2xpZGUkJDEsIFt7XHJcbiAgICAgIGtleTogJ21vdW50JyxcclxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdW50KCkge1xyXG4gICAgICAgIHZhciBleHRlbnNpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGdldChHbGlkZSQkMS5wcm90b3R5cGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihHbGlkZSQkMS5wcm90b3R5cGUpLCAnbW91bnQnLCB0aGlzKS5jYWxsKHRoaXMsIF9leHRlbmRzKHt9LCBDT01QT05FTlRTLCBleHRlbnNpb25zKSk7XHJcbiAgICAgIH1cclxuICAgIH1dKTtcclxuICAgIHJldHVybiBHbGlkZSQkMTtcclxuICB9KEdsaWRlKTtcclxuXHJcbiAgcmV0dXJuIEdsaWRlJDE7XHJcblxyXG59KSkpO1xyXG5cclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKGUpIHtcclxuICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwnKSkge1xyXG4gICAgICAgIHZhciBjYXJvdXNlbFRvb2xzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLXRvb2xzJyk7XHJcbiAgICAgICAgaWYoY2Fyb3VzZWxUb29scy5zY3JvbGxXaWR0aCA+IGNhcm91c2VsVG9vbHMub2Zmc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgY2Fyb3VzZWxUb29scy5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LXN0YXJ0JztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgc2xpZGVyMiA9IG5ldyBHbGlkZSgnLmNhcm91c2VsJywge1xyXG4gICAgICAgICAgICB0eXBlOiAnY2Fyb3VzZWwnLFxyXG4gICAgICAgICAgICBwZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICBmb2N1c0F0OiAnY2VudGVyJyxcclxuICAgICAgICAgICAgLy9wZWVrOiAnNTAnLCAvLyB7IGJlZm9yZTogMTAwLCBhZnRlcjogNTAgfSAtIHBlZWsgMTAwcHggb24gdGhlIGxlZnQgc2lkZSBhbmQgNTBweCBvblxyXG4gICAgICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAgICAgMTAwMDoge1xyXG4gICAgICAgICAgICAgICAgICAgIHBlclZpZXc6IDJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICA2NDA6IHtcclxuICAgICAgICAgICAgICAgICAgICBwZXJWaWV3OiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2xpZGVyMi5vbignYnVpbGQuYWZ0ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGdldFNsaWRlcygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzbGlkZXIyLm9uKCdtb3ZlLmFmdGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBnZXRTbGlkZXMoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2xpZGVyMi5vbigncnVuLmFmdGVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlVG9vbEluZGV4ID0gKyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2xpZGVfX2J1bGxldC0tYWN0aXZlJykuZ2V0QXR0cmlidXRlKCdkYXRhLWdsaWRlLWRpcicpLnNsaWNlKDEpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWN0aXZlVG9vbEluZGV4KTtcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFZhbCA9IDEzNCAqIGFjdGl2ZVRvb2xJbmRleDtcclxuICAgICAgICAgICAgY2Fyb3VzZWxUb29scy5zY3JvbGxMZWZ0ID0gc2Nyb2xsVmFsIC0gKGNhcm91c2VsVG9vbHMub2Zmc2V0V2lkdGgvMiAtIDY3KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2xpZGVyMi5tb3VudCgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTbGlkZXMgKCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlU2xpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2Fyb3VzZWwgLmdsaWRlX19zbGlkZS0tYWN0aXZlJylcclxuICAgICAgICAgICAgdmFyIHByZXYgPSBhY3RpdmVTbGlkZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1pdGVtIGltZycpO1xyXG4gICAgICAgICAgICB2YXIgY2VudGVyID0gYWN0aXZlU2xpZGUucXVlcnlTZWxlY3RvcignLmNhcm91c2VsLWl0ZW0gaW1nJyk7XHJcbiAgICAgICAgICAgIHZhciBuZXh0ID0gYWN0aXZlU2xpZGUubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC1pdGVtIGltZycpO1xyXG5cclxuICAgICAgICAgICAgc2V0SW1nKHByZXYpO1xyXG4gICAgICAgICAgICBzZXRJbWcoY2VudGVyKTtcclxuICAgICAgICAgICAgc2V0SW1nKG5leHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEltZyAoc2xpZGUpIHtcclxuICAgICAgICAgICAgdmFyIHByb2Nlc3NlZCA9IHNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1wcm9jZXNzZWQnKVxyXG4gICAgICAgICAgICBpZiAocHJvY2Vzc2VkID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNsaWRlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSlcclxuICAgICAgICAgICAgICAgIHNsaWRlLnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9jZXNzZWQnLCAndHJ1ZScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59KTtcclxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hcnJvdy1idG4nKSkge1xyXG4gICAgICAgIHZhciBhcnJvd0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1hcnJvdy1idG4nKSxcclxuICAgICAgICAgICAgbnVtYmVyc1Bob25lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm51bWJlcnMtcGhvbmUnKTtcclxuICAgICAgICBhcnJvd0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBudW1iZXJzUGhvbmUuY2xhc3NMaXN0LnRvZ2dsZSgnbnVtYmVycy1waG9uZS0tb3BlbicpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtYXJyb3ctYnRuJykpIHtcclxuICAgICAgICAgICAgICAgIG51bWJlcnNQaG9uZS5jbGFzc0xpc3QucmVtb3ZlKCdudW1iZXJzLXBob25lLS1vcGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSk7Il19
